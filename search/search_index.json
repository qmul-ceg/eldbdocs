{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"East London Database","text":"<p>This is the documentation site for the East London Database 2025 (<code>eldb2025</code>), maintained by the Clinical Effectiveness Group at Queen Mary University of London. It provides information for connecting to and using this data resource.</p> <p>Please use the menu at the top of this page:</p> <ul> <li>Connection: Connecting to the CEG VPN and ELDB server</li> <li>Database: ELDB database information, known issues and updates</li> <li>Data: Data Dictionary for all ELDB tables</li> <li>Analysis: Details of methods and underlying principles used for data selection and display.</li> </ul> <p>For information on ELDB from previous years, please use: ELDB 2024: ELDB 2024 Data and Schema.pdf ELDB 2023: ELDB 2023 Data and Schema.pdf</p> <p>For further information, see the QMUL CEG website</p> <p></p>"},{"location":"Analysis/Alcohol/","title":"Alcohol","text":""},{"location":"Analysis/Alcohol/#alcohol-units-per-week","title":"Alcohol Units Per Week","text":"<p>The <code>consume_latest_units_per_week</code> is a calculated units value derived from the text of <code>consume_latest_units</code>.  The text is parsed in the following manner:</p> <p>Find units for value  (units) if <code>consume_latest_units</code> contains \"pint\" - units = value * 2.3 (assuming 1 pint of 4% ABV)   if <code>consume_latest_units</code> contains \"glass\" - units = value * 2.3 (assuming 175ml glass of 13% ABV) if <code>consume_latest_units</code> contains \"bottle\" - units = value * 10 otherwise - units = 1</p> <p>Find multiplier for value (multiplier) if <code>consume_latest_code</code> = SN 105542008 (Teetotaller) - multiplier = 0 if <code>consume_latest_code</code> = SN 1082641000000106 (Alcohol units per week) - multiplier = 1 if <code>consume_latest_code</code> = SN 266917007 (Trivial drinker - \\&lt;1u/day) - multiplier = 1 (Units are sometimes given as \\\"/day\\\" but with a value &gt; 7.  All instances assumed to be for week.) if <code>consume_latest_code</code> = SN 442547005 (Alcohol units consumed on heaviest drinking day) - multiplier = 1.5 (This code provides no clear indication for weekly consumption. Estimated as half again per week.) if <code>consume_latest_code</code> = contains no indication of time period - multiplier = 1 (Assuming value is for a week)  </p> <p>if <code>consume_latest_units</code> contains \\'day\\' or variation - multiplier = 7 if <code>consume_latest_units</code> contains \\'week\\' or variation - multiplier = 1 if <code>consume_latest_units</code> contains \\'fortnight\\' or variation - multiplier = 1/2 if <code>consume_latest_units</code> contains \\'3 weeks\\' or variation - multiplier = 1/3 if <code>consume_latest_units</code> contains \\'month\\' or variation - multiplier = 1/4 if <code>consume_latest_units</code> contains \\'2 months\\' or variation - multiplier =1/8 if <code>consume_latest_units</code> contains \\'3 months or variation - multiplier = 1/13 if <code>consume_latest_units</code> contains \\'4 months\\' or variation - multiplier = 1/17 if <code>consume_latest_units</code> contains \\'6 months\\' or variation - multiplier = 1/26 if <code>consume_latest_units</code> contains \\'year\\' or variation - multiplier = 1/52 if <code>consume_latest_units</code> contains \\'Never\\' or variation - multiplier = 0  </p> <p>Creating a calculation: latest_units_pw = latest_value * units * multiplier OR if <code>consume_latest_units</code> contains \"occasionally\" or a variation - latest_units_pw = 0.55 (Estimating consumption, whatever value, will be below 1 unit per week)</p> <p>Backlinks:</p>"},{"location":"Analysis/Analysis_Overview/","title":"Analysis Overview","text":""},{"location":"Analysis/Analysis_Overview/#analysis","title":"Analysis","text":"<p>These pages in this section provide further details and background on conditions and results within the East London Database, in order to support data analyses.   </p> <p>Backlinks:</p>"},{"location":"Analysis/Blood_Pressure/","title":"Blood Pressure","text":""},{"location":"Analysis/Blood_Pressure/#blood-pressure-methodology","title":"Blood Pressure Methodology","text":"<p>In the Compass data, a blood pressure is represented by a combination of up to 3 codes:</p> <ul> <li>The parent, or reading, code to indicate a Blood Pressure has been taken but with no attached value. This is often SN 163020007 (On examination - blood pressure reading (finding))</li> <li>A systolic code with a value and a link in the data to the parent code. This is often SN 72313002 (Systolic arterial pressure (observable entity))</li> <li>A diastolic code with a value and a link in the data to the parent code. This is often SN 1091811000000102 (Diastolic arterial pressure (observable entity))</li> </ul> <p>Multiple blood pressures can be taken on the same day but, in theory, every blood pressure reading should have all 3 of these codes, ensuring the correct systolic and diastolic values can be matched up with confidence. In practice, the data is not always so neat: systolic and diastolic codes can exist without a parent code; or without a matching value code; or without a value; and parent codes can sometimes link to more than one systolic or diastolic code. Identifying blood pressures requires, therefore, finding and matching systolic and diastolic records using combinations of their parent record id, their date and their database record id. This last element is used as a proxy for time within a given day, as Compass does not contain the time of code entry onto the clinical system.</p> <p>The blood pressure codes are matched, therefore, using 4 algorithms:</p> <ol> <li>Systolic records with a value are matched to diastolic records with a value, using their common parent record id.</li> <li>Where algorithm 1 returns multiple diastolic records for a single systolic/parent record, the diastolic record with the nearest record id to the systolic record id is chosen</li> <li>Systolic records not matched by algorithms 1 &amp; 2 are matched with the diastolic record on the same date, where there is only 1 diastolic* record for that date.</li> <li>Systolic records not matched by algorithms 1, 2 &amp; 3 are ranked by date and record id and matched against the similarly ranked remaining diastolic records.</li> </ol> <p>Matched records in which either the systolic or diastolic value is NULL are removed and the remaining records are ranked by date and the systolic record id to find the latest record.</p> <p>The blood pressures in the <code>measures_blood</code> table are therefore the blood pressures readings for which it is possible to define a systolic/diastolic value. Readings with NULL and missing values have been filtered out.  The <code>bpparent_code</code> and <code>bpparent_name</code> fields provide the code where a parent code was used in the match. The <code>match_algorithm</code> column provides the number of the algorithm used for the match, as shown above.  Details provided in Measures: Blood Pressure.</p> <p>Backlinks:</p>"},{"location":"Analysis/Cancer_Screening/","title":"Cancer Screening","text":""},{"location":"Analysis/Cancer_Screening/#cancer-screening-overview","title":"Cancer Screening Overview","text":"<p>Cancer screening programmes exist for bowel, breast and cervical cancer for patients in specified age ranges:</p> <ul> <li>Bowel: all patients aged 56y, 58y, 60y-74y.</li> <li>Breast: all female patients aged 50y-70y</li> <li>Cervical: all female patients aged 25y-64y</li> </ul>"},{"location":"Analysis/Cancer_Screening/#screening-exclusions","title":"Screening Exclusions","text":"<p>The cancer screening tables are created from CORE with no age restriction or any other exclusions, except gender in breast cancer screening and cervical screening. The <code>age_at_event</code> column shows the age of the patient when the screening took place in order to assist identification of patients screened within the national programme.</p> <p>Although patients who have had a colectomy or mammectomy will not be included in the respective screening programmes, the only nationally defined exclusion codeset is for the cervical screening programme. This covers patients with hysterectomies and similar interventions. The exclusion columns in the <code>screen_cervical_cancer</code> table refer to the earliest date for this codeset (NOCX_COD). These columns allow for filtering patients that may not have been included in screening programmes or for identifying interventions following a screening.</p> <p>Backlinks:</p>"},{"location":"Analysis/Household/","title":"Household","text":""},{"location":"Analysis/Household/#household-methodology","title":"Household Methodology","text":"<p>The <code>status_household</code> table contains the residency for patients on 01/04/2024, as calculated using the ASSIGN algorithm developed by CEG in collaboration with the Endeavour Health charity. ASSIGN is a  quality-assured and validated address-matching algorithm with a 98.6% match rate (based on a population of 1.8 million adults registered with a GP in northeast London) and a high sensitivity and positive predictive value [1]. For any provided address, ASSIGN allocates a UPRN from the Ordnance Survey Great Britain property gazetteer database AddressBase Premium. This UPRN is first pseudonymised and then converted into a property_id which is unique solely within the database. The property_id cannot be used therefore for linking with any external data, but does provide a means to link patients into co-habiting 'households', size of which is shown in the <code>patient_count</code> column.</p> <p>The <code>property_id</code> and <code>patient_count</code> information is only provided for successful ASSIGN property matches. The <code>match_status_id</code> gives a breakdown of ASSIGN outcome:</p> <ol> <li>Residency  </li> <li>Non-Residential Property (ie the ASSIGN identified UPRN does not have residential classification (see below))  </li> <li>Imprecise Match (ie ASSIGN could not precisely identify a property from the patient address details)  </li> <li>Multiple Address (ie the address data shows the patient residing at more than 1 property)  </li> <li>No Match Data (ie no address or ASSIGN result found for the patient)  </li> <li>Improbable Household (ie over 10 patients identified as residing at the property (see below))  </li> </ol>"},{"location":"Analysis/Household/#non-residential-properties","title":"Non-Residential Properties","text":"<p>The AddressBase Premium provides information on each UPRN including a use classification. Any property without a Residential or Unclassified classification is excluded from the result. Unclassified properties are included as these are very often new residential properties. Residential covers all types of house, flats, caravans, house boats, sheltered accommodation and HMOs, as well as properties simply classified as 'Residential' or 'Dwelling'. It does not include Residential Institutions, such as nursing/care homes or halls of residency, nor hotels and hostels. Some of these classifications may become available in the future if validated.</p>"},{"location":"Analysis/Household/#improbable-households","title":"Improbable Households","text":"<p>A household is defined in our analyses as 'a group of residents living at the same property at the same time'. From our analyses, we have concluded that it is improbable that a household will consist of more  than 10 people. Where this is found in the data, it is more likely that the patient's address data is incomplete, or the property is a hostel or institution of some kind. These properties are therefore excluded from the results.</p> <p>[1] Harper, G., Stables, D., Simon, P., Ahmed, Z., Smith, K., Robson, J. and Dezateux, C. (2021) 'Evaluation of the ASSIGN open-source deterministic address-matching algorithm for allocating Unique Property Reference Numbers to general practitioner-recorded patient addresses\", International Journal of Population Data Science, 6(1). doi: https://doi.org/10.23889/ijpds.v6i1.1674</p> <p>Backlinks:</p>"},{"location":"Analysis/LSOA_IMD/","title":"LSOA and IMD","text":""},{"location":"Analysis/LSOA_IMD/#lsoa-overview","title":"LSOA Overview","text":"<p>Lower Super Output Area are geographical areas defined by the ONS based on the UK census.  They contain 400-1200 households with a population of 1000-3000 individuals.  At a higher level, groups of 4-5 LSOAs are designated as Middle Super Output Areas (MSOAs) which fit within local authority boundaries.  At a more granular level, LSOAs contain 4-5 Output Areas (OAs) of around 500 people. As data becomes potentially identifiable at this level, OAs are not generally used in statistical analysis or provided in ELDB.</p> <p>LSOA 2021 is the update of LSOA 2011 based on the Census 2021 data.  Many of the 2011 geographies have remained the same, but in some areas LSOAs have been either split or merged, to account for changes in housing and population density.  Where this has occurred, the LSOA 2021 has been given a new code, otherwise for unchanged LSOAs, the 2011 codes have passed across to LSOA 2021.  The <code>lu_lsoa2021</code> lookup table provides a comparison of LSOA 2021 to LSOA 2011, and to local authority, with a <code>changed</code> column showing the relationship: U (unchanged), S (split) and M (merged).  </p>"},{"location":"Analysis/LSOA_IMD/#imd-overview","title":"IMD Overview","text":"<p>Indices of Multiple Deprivation (IMD) are a UK classification of relative deprivation (ie poverty) derived from component scores (unemployment, crime rate, income etc).  They are produced at LSOA level in England and Wales, whilst Scotland and Northern Ireland use Data Zone and Super Output Area.  There are difficulties therefore making comparisons between England and Wales, and the rest of the UK.  </p> <p>The IMD is available as a score but is more readily usable as a national rank (1 is most deprived).  ONS provide national decile and quintile. For ELDB, quintiles have also been calculated at ICB and and local authority level.  Available in the <code>lu_imd2019</code> lookup table.</p> <p>The most recent IMD calculation provided by ONS was in 2019, with the previous calculation in 2015. An update to English IMD has been announced for late 2025 (OCSI ), which is expected to use the latest LSOA 2021 geographies.  In the meantime, the available IMD 2019 can only link to LSOA 2011.</p>"},{"location":"Analysis/LSOA_IMD/#imd-lsoa-by-postcode","title":"IMD &amp; LSOA by Postcode","text":"<p>For ELDB2025 we have used ONS postcodes-LSOA lookup tables, with the patient's postcode available via Compass, to map each patient's address to a LSOA2021 and a LSOA2011.  This gets round the issue of split or merged LSOA and allows us, in turn, to provide an IMD 2019 score and rank for the patient.  All this information is provide in the <code>CORE</code> table.</p> <p>Backlinks:</p>"},{"location":"Analysis/Mental_Health/","title":"Mental Health","text":""},{"location":"Analysis/Mental_Health/#mental-health-overview","title":"Mental Health Overview","text":"<p>Mental Health conditions can be difficult to identify within health data. The conditions can be transitory or episodic, meaning coding does not necessarily reflect the patient's current health. The experience and treatment of a mental health issue is also individual to a patient, meaning the presence of a code, particularly for Common Mental Health Disorders, does not provide a clear indication of the severity of the condition, the impact it has on the patient's life and wellbeing, or the way the condition is being managed. Patients may also exhibit multiple mental health problems, which a clinician may choose to code and treat in different ways depending on perceived priorities or causations. Finally, clinicians and patients may prefer to use or accept particular diagnoses, which can affect the coding used in the patient's record.</p> <p>Mental Health data is provided across a series of registers.</p>"},{"location":"Analysis/Mental_Health/#anxiety","title":"Anxiety","text":"<p>The <code>anxiety</code> table includes codes associated with the Common Mental Health Disorders, with the exclusion of Depression, as defined by NICE:</p> <ul> <li>generalised anxiety disorder</li> <li>panic disorder</li> <li>obsessive-compulsive disorder (OCD)</li> <li>post-traumatic stress disorder (PTSD)</li> <li>social anxiety disorder</li> <li>depression</li> </ul> <p>Inclusion is for codes recorded in the last 24 months, as a reasonable timeframe for ensuring patients are currently being managed, to some level, for their condition.</p>"},{"location":"Analysis/Mental_Health/#depression","title":"Depression","text":"<p>The <code>depression</code> table contains all patients who have been coded for depression since 01/04/2006 (QOF definition). The latest code is provided, as well as the earliest, so it is possible to filter for patients who have been recently coded with depression eg in the last 12 or 24 months.</p> <p>Depression codes, however, are not consistently or regularly re-entered and there are many patients who appear to be receiving ongoing treatment for depression, but who have no recent depression coding. Conversely, the 'depression resolved' code is not consistently applied, so the register will also include patients who are no longer be treated as depressed.</p>"},{"location":"Analysis/Mental_Health/#antidepressants","title":"Antidepressants","text":"<p>The <code>prescribed_antidepressants</code> table contains all patients who have been prescribed anti-depressant medication (BNF 04:03 excluding amitriptyline) in the past six months. Amitriptyline is excluded as it is not recommended for treating depression and is more commonly prescribed for pain relief. Other drugs within this chapter may also be prescribed for conditions other than depression, sometimes with differing dosages:</p> BNF VTM Medication Dosage Other Conditions + Dosage 403010 F0 Clomipramine Hydrochloride &gt;=10mg Phobia + OCD &gt;=10mg 403010 L0 Doxepin &gt;=75mg Pruritus in Eczema 3-12mg (cream) 403010 N0 Imipramine Hydrochloride &gt;=75mg Childhood Bedwetting 25-75mg 403010 X0 Trazodone Hydrochloride &gt;=100mg Anxiety 75-300mg 403020 K0 Moclobemide &gt;=150mg Anxiety 300-600mg 403030 D0 Citalopram Hydrobromide 10-40mg Panic 10-40mg 403030 Z0 Citalopram Hydrochloride 40mg/1ml Panic 40mg/1ml 403030 X0 Escitalopram 5-20mg Anxiety, OCD &amp; Panic 5-20mg 403030 E0 Fluoxetine Hydrochloride 20-60mg Bulimia 40-60mg, OCD 20-60mg, Menopause 20mg 403030 L0 Fluvoxamine Maleate 50-300mg OCD 50-300mg 403030 P0 Paroxetine Hydrochloride 20-50mg OCD 20-60mg, Panic 10-60mg, Menopause 10mg 403030 Q0 Sertraline Hydrochloride 50-200mg OCD 50-200mg, Panic, PTSD &amp; Anxiety 25mg-200mg 403040 Y0 Duloxetine Hydrochloride 60mg Anxiety 30-120mg, DM Neuro 60-120mg, Female Incontinence 20-40mg 403040 W0 Venlafaxine &gt;=75mg Anxiety 75-225mg, Panic 37.5mg-225mg, Menopause 37.5mg-75mg <p>Patients may be instructed to take multiple tablets per day and may have concurrent prescriptions for different strength medications. The particular dosage shown in the <code>latest6m_name</code> field should only be taken as a rough indicator of the medication dosage that has been advised for the patient and whether they are being treated for a condition other than depression.</p> <p>The prescribed product shown in the <code>latest6m_code</code> and name is the latest prescription within a prescription course for that medication and dosage. That prescription course may be a Repeat course (allowing the patient to re-order the prescription) or an Acute course (a one-off prescription). The table provides the latest Repeat prescription or, if no Repeat prescription has occurred in the last six months, the latest Acute (one-off) prescription. This is shown in the <code>prescription_type</code> column. The <code>prescription_count</code> gives the number of prescriptions that have been made within the prescription course to date and the <code>prescription_earliest_date</code> gives the date of the first prescription within the course.</p>"},{"location":"Analysis/Mental_Health/#active-depression","title":"Active Depression","text":"<p>The  <code>prescribed_antidepressants</code> table can be joined to the <code>depression</code> table, in order to identify patients with both a depression code and a current anti-depressant medication. As described above, there is no guarantee however that the patient isn't being medicated for an alternative condition. Attention may want to be given, therefore, to the type of prescription, how long the prescription has been in place and to the dosage.</p> <p>The <code>prescribed_antidepressants</code> table could also be cross-referenced against the <code>anxiety</code> and <code>eating_disorder</code> registers to further identify patients that are possibly receiving the medication for these conditions, rather than depression.</p> <p>Patients with depression may also follow talking therapies rather than take medication. It is advisable, therefore, to also include patients without an anti-depressant prescription but with a recent depression code.</p>"},{"location":"Analysis/Mental_Health/#eating-disorder","title":"Eating Disorder","text":"<p>The <code>eating_disorder</code> register contains patients with mental health conditions linked to beliefs about their weight or body shape, such as Anorexia Nervosa, Bulimia and Binge Eating. These conditions are not listed by NICE as CMHD.</p> <p>The register does not include patients with Other Specified Feeding or Eating Disorder (OSFED), whose condition is linked to other beliefs or concerns, or patients with Avoidant/Restrictive Food Intake Disorder (ARFID), who choose to avoid or limit their intake of certain foods. It is expected that these patients will also have more general codes in their records that will place them into the <code>anxiety</code> or <code>severe_mental_illness</code> registers.</p>"},{"location":"Analysis/Mental_Health/#severe-mental-illness","title":"Severe Mental Illness","text":"<p>The <code>severe_mental_illness</code> register includes persistent long term mental health conditions, such as schizophrenia and bipolar disorder. It also includes anyone currently prescribed lithium.</p>"},{"location":"Analysis/Mental_Health/#personality-disorder","title":"Personality Disorder","text":"<p>The <code>personality_disorder</code>register is a non-QOF register specific to personality disorders. It uses codes that do not appear in the MH_COD codeset used for <code>severe_mental_illness</code>. Patients may have been coded however to appear in both tables.</p> <p>Backlinks:</p>"},{"location":"Analysis/NHS_Health_Checks/","title":"NHS Health Checks","text":""},{"location":"Analysis/NHS_Health_Checks/#nhs-health-checks-overview","title":"NHS Health Checks Overview","text":"<p>NHS Health Checks are undertaken on patients who do not have a pre-existing Long Term Condition and/or have not been prescribed statins, as these patients will receive regular checkups within their specific care pathway. On this basis, whilst the GP practice may have carried out the activity, a NHS Health Check recorded for a patient that had one or more of the conditions listed below on the date of the NHS Health Check would not be considered valid for inclusion in the service and payment.</p>"},{"location":"Analysis/NHS_Health_Checks/#nhs-health-check-ineligibility","title":"NHS Health Check Ineligibility","text":"<p>The <code>nhs_healthcheck</code> table provides information on recorded NHS Health Checks.  The <code>inelig_earliest_date</code> provides the earliest date at which a patient was diagnosed with a LTC or was prescribed statins and so become ineligible for a NHS Health Check. The <code>inelig_table</code> column provides the table name from which the <code>inelig_earliest_date</code> was derived. The <code>valid_nhshc</code> field provides a Y/N definition of the Health Check validity, based on the <code>inelig_earliest_date</code> compared to the NHS Health Check <code>latest_date</code>.</p> <p>Conditions that define NHS Health Check ineligibility are:</p> <ul> <li>Hypertension (<code>hypertension</code>)</li> <li>Diabetes (<code>diabetes</code>)</li> <li>CKD (<code>ckd</code>)</li> <li>Heart Failure (<code>heart_failure</code>)</li> <li>PAD (<code>pad</code>)</li> <li>Familial Hypercholesterolemia (<code>f_hypercholesterolemia</code>)</li> <li>Stroke TIA (<code>stroke_tia</code>)</li> <li>CHD (<code>chd</code>)</li> <li>Arterial Fibrillation (<code>atrial_fibrillation</code>)</li> <li>Statin Prescription. (<code>prescribed_statins</code>)</li> </ul> <p>Backlinks:</p>"},{"location":"Analysis/Useful_Links/","title":"Useful Links","text":"<p>Fingertips Technical Guides: https://fingertips.phe.org.uk/profile/guidance/supporting-information/ph-methods</p>"},{"location":"Connection/ELDB_Password/","title":"ELDB Server Password","text":""},{"location":"Connection/ELDB_Password/#your-eldb-server-username-and-password","title":"Your ELDB Server Username and Password","text":"<p>CEG will provide you with a csv file containing the access and authentication details for the ELDB server. These access details are separate from the CEG-VPN credentials and are needed to connect to the SQL Server on which the ELDB data is hosted.  You will need to enter into the application that you use to query the ELDB data (eg SSMS, MS Access, R etc). These credentials consist of:</p> <ul> <li>server address \u2013 this is an internet address setup to link to the ELDB server. It is the primary address to use when setting up a connection.</li> <li>server name \u2013 this is the name of the server used by the hosting service (Amazon Web Services). If there is a problem with the server address, the server name may work instead.</li> <li>server IP \u2013 this is the actual address of the server on the network. If the server address and server name don\u2019t work, the server IP should work. However, the server IP is not static and can change if the server is rebooted during maintenance. It is advisable where possible therefore to use either the server address or name.</li> <li>username \u2013 this is your login specifically for the ELDB server.</li> <li>password \u2013 this is a lengthy set of random characters specific to your username, created by CEG. It does not require changing but you can change it, as described below.</li> </ul> <p>Your password must be stored in a secure location. The recommendation is to use a Password Manager such as BitWarden or KeepassXC.</p>"},{"location":"Connection/ELDB_Password/#changing-your-eldb-password","title":"Changing Your ELDB Password","text":"<p>CEG will provide you with a strong password for the ELDB Server. Previously, the requirement was for this to changed on first login. This caused problems for some users attempting to connect with applications that didn\u2019t have password management facilities. The policy has changed, therefore, to using complex static passwords. However, users are able to change this password to one more suitable for their specific needs, or if they believe the password may have been compromised.</p> <p>The user generated password must:</p> <ul> <li>be unique to the ELDB Server login.</li> <li>be at least 12 characters.</li> <li>be at least 4 words long, if created using a passphrase or diceware system.</li> <li>have a calculated entropy of 60+</li> </ul> <p>Password generators are available online, including: https://rumkin.com/tools/password/ https://diceware.dmuth.org/</p>"},{"location":"Connection/ELDB_Password/#changing-your-password-using-an-sql-client","title":"Changing your Password using an SQL Client","text":"<p>This is the simplest method, if you have an SQL client (SSMS, ADS, DBeaver etc) that is connected to the ELDB Server. Even if you don\u2019t use SQL for data querying, it may be useful to have a SQL client connection specifically for this purpose.</p> <p>In the SQL client, create a new query and enter (replace items in { } as indicated): <pre><code>ALTER LOGIN {username};\nWITH PASSWORD = '{new password}'\nOLD_PASSWORD = '{old password}'\n</code></pre> Note the single quotes around the new and old passwords. Run the query and check that no error messages are returned. You will need to separately change any connection details in your applications to the new password.</p>"},{"location":"Connection/ELDB_Password/#changing-your-password-using-ms-access","title":"Changing your Password using MS Access","text":"<p>This method requires that you have an ODBC DSN set up for the ELDB Server for use in Microsoft Access.</p> <ul> <li>Create a new Access database and proceed in the same way as instructed below for linking ELDB tables to Access:</li> <li>Select to connect to a SQL Server or an ODBC data source.</li> <li>Select Link the data source by creating a linked table and select the DSN that you created for the ELDB Server under the Machine Data Source tab.</li> </ul> <p></p> <ul> <li>In the SQL Server Login Pop Up, enter your old (or current) password and click Options &gt;&gt; to display the additional settings.</li> <li>Confirm that Database refers the right database.</li> <li>Tick Change Password and provide a new password</li> <li>Click OK and then OK to close the Link Tables window. OK and Close any still open windows and then the Access database.</li> </ul> <p>Your password will have now been changed on the server and so can be used or changed in any other Access databases or applications you use.</p>"},{"location":"Connection/ELDB_Password/#change-your-password-in-sqlcmd","title":"Change your Password in SQLCMD","text":"<p>This is another simple method, if you have SQLCMD installed on your device.</p> <ul> <li>Open a Command Prompt or PowerShell and type (replace items in { } as indicated): <pre><code>sqlcmd -S eldb.qmul-ceg.net -U {username} -P {password} -Z {new password}\n</code></pre></li> <li>Press enter to run the command. If there are no problems, the cursor will open a new line as 1&gt;. Type exit to leave the utility.</li> </ul>"},{"location":"Connection/Required_Software/","title":"Required Software","text":""},{"location":"Connection/Required_Software/#vpn-client","title":"VPN Client","text":"<p>You will need to install a VPN client onto your laptop, PC or Mac that can handle OpenVPN protocols. We recommend:</p> <ul> <li>OpenVPN GUI Community 64-bit: a lightweight  open-source app for **Windows</li> <li>OpenVPN Connect: a slicker but more resource heavy freeware app for Windows / Mac / Linux</li> <li>Tunnelblick: the standard VPN client for Mac</li> </ul> <p>Adding an ovpn file to a client by default requires Admin rights to the computer. Change the Profiles folder to within the user area. </p> <p>Disconnect from any other VPN services you may be using, eg Cisco AnyConnect (EMIS web) before installing the VPN client. If you are reinstalling, it is best to uninstall the previous version first. It may help to also reboot your laptop or PC after the install.</p> <p>The OpenVPN GUI app does not have an automated update facility.  If it is installed on an unmanaged laptop or PC, users should regularly check for updates and re-install if needed.  Tunnelblick and OpenVPN Connect should automatically keep themselves up to date. </p>"},{"location":"Connection/Required_Software/#further-information","title":"Further Information","text":"<ul> <li>OpenVPN Community Wiki: Using OpenVPN GUI</li> <li>OpenVPN Documentation: Connect Client</li> <li>Tunnelblick Quick Start Guide</li> </ul>"},{"location":"Connection/Required_Software/#otp-authenticator","title":"OTP Authenticator","text":"<p>CEG-VPN3 uses TOTP for multi-factor authentication.  You can use any TOTP authenticator phone app compatible with Google Authenticator, which includes the Duo Mobile that you would have used to connect to CEG-VPN2 or CEG-VPN1.  Other suitable apps are Google Authenticator, Microsoft Authenticator, Authy, 2FAS Auth and many others.  All are available in the appropriate app store.</p> <p>Where it is provided, app unlock security such as PIN or biometrics, should be used.  Screenshots inside the app should be switched off.  Care should be taken about the storage location for any backup facility. </p> <p>Backlinks:</p>"},{"location":"Connection/Setting_Up_VPN_Access/","title":"Setting Up CEG-VPN Access","text":""},{"location":"Connection/Setting_Up_VPN_Access/#download-your-zip-file","title":"Download your zip file","text":"<p>You should have received an email containing a URL link to download a zip file containing your CEG-VPN3 login details.  This is sensitive information, so save it to your secured home location in your .ssh folder or a dedicated OpenVPN folder. For instance: C:\\Users{USERNAME}\\OpenVPN C:\\Users{USERNAME}.ssh /Users/{USERNAME}/.ssh /Users/{USERNAME}/OpenVPN </p> <p>The URL is only live for 48 hours, so please download the file as soon as possible.\u00a0 If you miss the deadline contact me to generate another URL for you.</p> <p>The zip file contains the following files:</p> <ul> <li>auth.txt -- your VPN username and password</li> <li>{USERNAME}.png -- your OTP QR code</li> <li>{USERNAME}.ovpn -- your VPN config file containing the necessary keys</li> <li>{USERNAME} -- (no file extension) additional OTP information</li> </ul> <p>These files will enable you to setup a connection to the CEG-VPN3 using a VPN client (OpenVPN Client or Tunnelblick) + authentication using an OTP authorisation phone app (eg 2FAS, Microsoft Authenticator, Authy etc).  This is slightly different to the Duo Mobile 'PUSH' method that was used for CEG-VPN2, but will probably be familiar from other OTP authorisations.</p>"},{"location":"Connection/Setting_Up_VPN_Access/#setup-your-otp-authenticator","title":"Setup your OTP authenticator","text":"<p>You will need an OTP Authenticator installed on your smart phone.  In your OTP app:</p> <ul> <li>Open the {USERNAME}.png file to display the QR code.</li> <li>Follow the instructions specific to your OTP Authenticator app to add a new account or service using the QR code.</li> <li>Skip any step that asks you to retype the displayed number.</li> <li>If wanted, edit the account or service name to a better description, eg \"CEG-VPN3\"</li> </ul>"},{"location":"Connection/Setting_Up_VPN_Access/#setup-your-vpn-client","title":"Setup your VPN client","text":"<p>You will need a VPN Client installed on your laptop or PC.</p>"},{"location":"Connection/Setting_Up_VPN_Access/#openvpn-gui","title":"OpenVPN GUI","text":""},{"location":"Connection/Setting_Up_VPN_Access/#ensure-that-your-openvpn-gui-client-is-using-openvpn-v26","title":"Ensure that your OpenVPN GUI client is using OpenVPN v2.6","text":"<ul> <li>Right-click on the OpenVPN GUI try icon and go to Settings and the About tab.</li> <li>Half way down the tab is the OpenVPN information, eg \"OpenVPN v2.6.13\"<ul> <li>If needed, download and install the latest version</li> </ul> </li> </ul>"},{"location":"Connection/Setting_Up_VPN_Access/#import-your-ovpn-file-into-openvpn-gui","title":"Import your ovpn file into OpenVPN GUI","text":"<ul> <li>Right-click on the OpenVPN try icon and select Import File.</li> <li>Browse to your ovpn file and click Open.</li> <li>OK the popup message.</li> <li>If you are updating the ovpn file, OK the warning that you are overwriting an existing file.</li> </ul>"},{"location":"Connection/Setting_Up_VPN_Access/#first-time-connect-to-ceg-vpn3","title":"First-time connect to CEG-VPN3","text":"<ul> <li>Right-click the OpenVPN tray icon and click Connect.</li> <li>A window will appear displaying connection information.</li> <li>In the authentication window:<ul> <li>Enter your username (from the auth.txt file) into Username</li> <li>Enter your password (from the auth.txt file) into Password</li> <li>Tick Save Password</li> <li>Enter the current code displayed in your OTP Authenticator into Response</li> <li>Click OK</li> </ul> </li> <li>In the second authentication window:<ul> <li>Re-enter your password (from the auth.txt file) into Password</li> <li>Tick Save Password</li> <li>Click OK</li> </ul> </li> </ul>"},{"location":"Connection/Setting_Up_VPN_Access/#openvpn-connect-windows-mac","title":"OpenVPN Connect (Windows / Mac)","text":""},{"location":"Connection/Setting_Up_VPN_Access/#add-your-ovpn-file-as-a-new-profile","title":"Add your ovpn file as a new profile","text":"<ul> <li>Click on the + and select Upload File</li> <li>Drag and drop your ovpn file into the OpenVPN Connect window</li> <li>OR click Browse and select your ovpn file</li> </ul>"},{"location":"Connection/Setting_Up_VPN_Access/#in-the-profile-details","title":"In the profile details:","text":"<ul> <li>Change 'Profile Name' to something more meaningful, eg \"CEG-VPN3\"</li> <li>Enter your username (from the auth.txt file) into 'Username'</li> <li>Tick 'Save Password'<ul> <li>Enter your password (from the auth.txt file) into 'Password'</li> </ul> </li> <li>Tick 'Save Private Key Password'<ul> <li>Re-enter your password (from the auth.txt file) into 'Private Key Password'</li> </ul> </li> <li>Click Profiles</li> </ul>"},{"location":"Connection/Setting_Up_VPN_Access/#tunnelblick-mac","title":"Tunnelblick (Mac)","text":""},{"location":"Connection/Setting_Up_VPN_Access/#add-your-ovpn-file-as-a-new-profile_1","title":"Add your ovpn file as a new profile","text":"<ul> <li>Drag and drop your ovpn file onto the Tunnelblick icon.</li> <li>If prompted, install 'only for me'</li> <li>If prompted, agree to use the openvpn-down-root plugin'</li> </ul>"},{"location":"Connection/Setting_Up_VPN_Access/#in-the-login-required-window","title":"In the Login Required window:","text":"<ul> <li>Enter your username (from the auth.txt file) into 'Username'</li> <li>Tick 'Save in Keychain'</li> <li>Enter your password (from the auth.txt file) into 'Password'</li> <li>Tick 'Save in Keychain'</li> <li>Click OK</li> </ul>"},{"location":"Connection/Setting_Up_VPN_Access/#in-the-authentication-popup","title":"In the Authentication popup:","text":"<ul> <li>Enter the current code displayed in your OTP Authenticator into OTP Code</li> <li>Click OK</li> <li>In the Passphrase Required window:</li> <li>Re-enter your password (from the auth.txt file)</li> <li>Tick 'Save in Keychain'</li> <li>Click OK</li> </ul> <p>Backlinks:</p>"},{"location":"Connection/Troubleshooting/","title":"Potential Issues","text":""},{"location":"Connection/Troubleshooting/#vpn-client-doesnt-connect","title":"VPN client doesn\u2019t connect","text":"<ul> <li>Check the username and password are correct - be careful not to add spaces, capitalisation etc</li> <li>Check the OTP code hasn't regenerated in the time taken to enter it</li> <li>If you\u2019ve recently been sent a new ovpn file, make sure you have installed it.</li> <li>Check the OpenVPN log for ERROR messages</li> </ul>"},{"location":"Connection/Troubleshooting/#otp-doesnt-seem-to-work","title":"OTP doesn't seem to work","text":"<ul> <li>Sometimes the time synchronisation can be a little out.<ul> <li>Delete and reinstall the profile in your app.  </li> <li>Try setting up the profile in a different app.</li> </ul> </li> </ul>"},{"location":"Connection/Troubleshooting/#unable-to-connect-to-server","title":"Unable to connect to server","text":"<p>Indicated by error messages containing: \u201cserver not found\u201d / \u201ccan not find specified endpoint\u201d.</p> <ul> <li>Check that you\u2019ve entered the server name correctly: eldb.qmul-ceg.net</li> <li>It can help some applications to specify that the connection uses TCP, either in a select dropdown or as a prefix: tcp:eldb.qmul-ceg.net</li> <li>If the server name still doesn\u2019t work, try using the endpoint name:     tcp:ceg-mssql-02.czd1trqfl4br.eu-west-2.rds.amazonaws.com)</li> <li>If that doesn\u2019t work, try using the server\u2019s IP address. This can change when the server is rebooted or updated, which is why it is recommend to use the server name or endpoint, if possible. The current server IP address is:     tcp:192.168.5.130</li> </ul>"},{"location":"Connection/VPN_Connection/","title":"CEG-VPN Connection","text":"<p>Ensure you have followed the instructions in Setting Up CEG-VPN Access</p>"},{"location":"Connection/VPN_Connection/#connect-to-ceg-vpn","title":"Connect to CEG-VPN","text":"OpenVPN GUI (Windows) <ul> <li> <p>Right-click the OpenVPN tray icon and click Connect.</p> </li> <li> <p>A window will appear displaying connection information.</p> </li> <li> <p>In the authentication window:</p> </li> <li> <p>Enter the current code displayed in your OTP Authenticator into Response</p> <ul> <li>Click OK</li> </ul> </li> </ul> OpenVPN Connect (Windows / Mac) <ul> <li> <p>Open OpenVPN Connect and click on the CEG-VPN3 Profile</p> </li> <li> <p>In the 'Multi-factor authentication' window:</p> <ul> <li> <p>Enter the current code displayed in your OTP Authenticator into Response</p> </li> <li> <p>Click Send</p> </li> </ul> </li> </ul> Tunnelblick (Mac) <ul> <li> <p>Open Tunnelblick and click on the CEG-VPN3 Profile</p> </li> <li> <p>In the Authentication popup:</p> <ul> <li> <p>Enter the current code displayed in your OTP Authenticator into OTP Code</p> </li> <li> <p>Click OK</p> </li> </ul> </li> </ul>"},{"location":"Connection/VPN_Connection/#disconnect-from-ceg-vpn3","title":"Disconnect from CEG-VPN3","text":"<p>Disconnect from the resource that you are using (Compass, ELDB, CEG Utilities etc) in the appropriate way for your application (click disconnect, tying 'exit' etc).</p> OpenVPN GUI (Windows) <ul> <li>Right-click the tray icon and click Disconnect</li> </ul> OpenVPN Connect (Windows / Mac) <ul> <li>Click on the green toggle button.</li> </ul> Tunnelblick (Mac) <ul> <li>Click on Disconnect and Quit in the Tunnelblick menu icon</li> </ul>"},{"location":"Connection/VPN_Overview/","title":"CEG-VPN &amp; Resources Overview","text":""},{"location":"Connection/VPN_Overview/#ceg-vpn3","title":"CEG-VPN3","text":"<p>The CEG-VPN3 (Virtual Private Network) is a secured network hosted in Amazon Web Services, which is accessible only via a dedicated OpenVPN server.  The VPN contains several CEG resources, most notably Compass - our Discovery subscriber database.</p> <p>Connection to the OpenVPN server requires the user to have a suitable VPN client installed on their laptop or PC.  This establishes a secure tunnel between their device and the OpenVPN server using a series of keys and protocols to encrypt the connections and communications.  The user's encryption configuration is provided in a personal <code>.ovpn</code> file, which the user imports into the VPN client.</p> <p>Previous versions of the VPN (CEG-VPN1 and CEG-VPN2) used Duo Mobile to provide 2-Factor Authentication.  CEG-VPN3 instead uses a username, password and TOTP (Time-synchronised One Time PIN) to provide user authentication.  The TOTP is generated from from an OTP phone app on the uses phone.   </p> <p>The encryption used throughout is inline with NHS Digital  and National Cyber Security Centre (NCSC  ) guidelines and employs up to date methods and standards.</p> <p></p>"},{"location":"Connection/VPN_Overview/#ceg-resources","title":"CEG Resources","text":"<p>Once a user has connected into the CEG-VPN, they can connect to the CEG resources for which they have login or access credentials.  Each resource has it's own security requirements, which means access to one resource, such as the ELDB server, does not provide access to any other resource.</p> <p>The ELDB databases, one for each year, are held on the 'ELDB' Microsoft SQL Server.  Access requires a username and password, separate to the CEG-VPN credentials, connecting on the standard SQL Server port 1433.</p> <p>Backlinks:</p>"},{"location":"Connection/View_Log/","title":"Viewing VPN Log","text":""},{"location":"Connection/View_Log/#view-save-vpn-client-logs","title":"View &amp; Save VPN client logs","text":""},{"location":"Connection/View_Log/#openvpn-gui","title":"OpenVPN GUI","text":"<ul> <li>Right-click on the tray icon and select View Log</li> <li>The log file will open in a text editor<ul> <li>Save as a new txt file.</li> </ul> </li> </ul>"},{"location":"Connection/View_Log/#openvpn-connect","title":"OpenVPN Connect","text":"<ul> <li>In the Profiles view, click on the 'code' icon in the top right-hand corner</li> <li>The log file will be displayed<ul> <li>Click on the 'share' icon in the top right-hand corner</li> <li>Save the log file to a suitable location</li> </ul> </li> </ul>"},{"location":"Connection/View_Log/#tunnelblick","title":"Tunnelblick","text":"<ul> <li>Click on the Tunnelblick icon in the menu bar, then click \"VPN Details\u2026\".</li> <li>Click on the large \"Configurations\" button at the top of the window.</li> <li>Select the OpenVPN profile on the left side of the window.</li> <li>Click on Copy Console Log to Clipboard and paste into a txt file.</li> </ul>"},{"location":"Connection/Clients/MS_Access/","title":"Microsoft Access","text":""},{"location":"Connection/Clients/MS_Access/#microsoft-access-overview","title":"Microsoft Access Overview","text":"<p>Microsoft Access is a database application available within the Microsoft Office suite. It can link to tables within an East London Database using an ODBC driver within a user DSN. This should be setup to not download or copy the data to your device.</p> <p>Whilst it is possible to host multiple connections within a single MS Access file, this could be cumbersome. We have found that queries joining tables from two databases run extremely slowly or never finishing at all. At the moment, therefore, cross database/year analysis is not possible. Our recommendation is to create separate MS Access database files for each database/year.</p>"},{"location":"Connection/Clients/MS_Access/#odbc-driver-and-user-dsn","title":"ODBC Driver and User DSN","text":"<p>Before continuing with this setup, make sure you have completed the ODBC driver setup and created a User DSN on your laptop or PC.</p>"},{"location":"Connection/Clients/MS_Access/#connect-ms-access-to-the-eldb-server","title":"Connect MS Access to the ELDB Server","text":"<p>Create a new Access database within a secure location. In the new Access database, select to connect to a SQL Server or ODBC data source. Different versions of MS Access do this slightly differently. For instance:     Select External Data &gt; From Database &gt; SQL Server.     Select External Data &gt; New Data Source &gt; From Other Sources &gt; ODBC Database. Select Link the data source by creating a linked table and select OK. In the Pop Up, select the Machine Data Source tab and then select the DSN that you created for the ELDB Server. Click OK.</p> <p></p> <p>In the SQL Server Login Pop Up, enter your password.</p> <p>Click Options &gt;&gt; to display the additional settings</p> <p>Set Database to the ELDB database that you wish to connect to eg eldb2022</p> <p>An Option is also provided to change your password, if needed.</p> <p>Click OK</p> <p></p> <p>In the Link Tables dialog box, select each ELDB table with which you wish to link. ELDB tables and views are prefixed with dbo. Do not select any of the system tables (information_schema., sys.).</p> <p>Each table has to be select one by one, using a mouse click or spacebar and arrow keys.</p> <p>Tip</p> <p>Only link to the tables you need as you can add other later (see Adding tables via DSN)</p> <p>Link to <code>db_tables</code> to have a list of all tables in the database.</p> <p>Click OK.</p> <p></p> <p>A popup will warn that the table contains BigInt data type. Click Yes.</p> <p>A second popup will warn that a data type is not backwards compatible. Click OK</p> <p>This is required to stop the #Deleted error (see below).</p> <p>The linked tables will appear in the Access left hand pane.</p>"},{"location":"Connection/Clients/MS_Access/#ticking-save-password","title":"Ticking Save Password","text":"<p>The Link Tables popup has a Save password option.</p> <p>The recommendation is to NOT tick to Save the password.</p> <p>Ticking this option means that you will not have to provide a password each time you use the database. However, the password is not encrypted and is saved within the file. A popup with this information will require clicking for every linked table ie if you select to link 80 tables, you will need to click a Save Password prompt 80 times.</p>"},{"location":"Connection/Clients/MS_Access/#deleted-error","title":"#Deleted Error","text":"<p>The ELDB database uses a datatype of \u2018bigint\u2019, which is not recognised as standard by Access and requires a change in the settings. Without this change, the ELDB data will be displayed as \u2018#Deleted\u2019.</p> <p></p> <p>Changing the setting can either be done during the table linking, described above, or via the Access settings.</p> <p>Select File &gt; Options &gt; Current Database</p> <p>Scroll down to Data Type Support Options</p> <p>Tick \u2018Support Large Number (BigInt) Data Type for Linked/Imported Tables\u2019 and OK</p> <p></p> <p>A popup will warn you that must open and close the database. Click OK and reopen the database.</p>"},{"location":"Connection/Clients/MS_Access/#removing-the-dbo_-prefix","title":"Removing the dbo_ prefix","text":"<p>The linked tables appear in Access with a schema prefix (<code>dbo_</code>). This can be removed by running a Visual Basic script provided by CEG. </p> <p>Download the VB_remove_dbo.bas  script to your laptop or PC.</p> <p>Within the Access database, open the Visual Basic module. This may be accessed in different ways depending on your version of MS Access. For instance: Database Tools &gt; Visual Basic</p> <p>Select File &gt; Import File and select the VB_remove_dbo.bas file. Click Open.</p> <p>Select Run &gt; Run Macro and Run the TruncateDBO macro.</p> <p>Click OK to clear the message box.</p> <p>Close the Visual Basic module.</p> <p>It can take a couple of minutes for the table list to refresh, without the <code>dbo_</code> prefix.</p>"},{"location":"Connection/Clients/MS_Access/#adding-additional-linked-tables","title":"Adding Additional Linked Tables","text":"<p>The DSN links MS Access to the tables and views specified in the Linked Tables dialogue.  New tables need to be manually added to make them available within MS Access.  Similarly, changes to the SQL Server tables requires a manual refresh for the MS Access view to be updated.</p>"},{"location":"Connection/Clients/MS_Access/#adding-tables-via-dsn","title":"Adding tables via DSN","text":"<p>Reconnect your Access database to your ODBC DSN by following the steps for Connect MS Access to the ELDB Server. At the Link Tables dialog box, select the additional tables with which you wish to link.  Click OK. As before, click Yes and OK to accept the BigInt datatype</p>"},{"location":"Connection/Clients/MS_Access/#refreshing-tables-via-linked-table-manager","title":"Refreshing tables via Linked Table Manager","text":"<p>Select External Data &gt; Linked Table Manager Expand the Data Source Name (click on the \u201c+\u201d sign) and select all by selecting the ODBC checkbox.  OR alternatively, you can select the specific table(s) that you know need refreshing.</p> <p></p> <p>On the right-hand side of the window, click on \u201cRefresh\u201d. The refresh may take a few seconds</p> <p>Tip</p> <p>Refresh your MS Access tables every month to ensure your database reflects any new items or amendments. We issue a monthly newsletter to East London Database users, which includes a list of any specific changes.</p> <p>Backlinks:</p>"},{"location":"Connection/Clients/ODBC_DSN/","title":"ODBC Driver &amp; DSN","text":"<p>A Data Source Name (DSN) holds the connection information required for a data client on Windows to connect with a data source \u2013 in this case the ELDB Server. It specifies the ODBC driver to use and the server address. Both MS Access and Power Query (Excel and Power BI) use a DSN to connect to the ELDB server.</p> <p>Note: The DSN specifies the connection to the server. The same DSN can be reused in different applications and instances of an application that links to differing databases on the server. (ie MS Access files setup for differing ELDB databases can use the same DSN, amended within the MS Access instance to link to a specified database).</p>"},{"location":"Connection/Clients/ODBC_DSN/#install-the-odbc-driver-for-sql-server","title":"Install the ODBC Driver for SQL Server","text":"<p>The ODBC Driver for SQL Server enables applications to connect and query data on a SQL Server. To check if it is installed on your PC:</p> <p>Open the ODBC Data Source Administrator (64-bit) App by either</p> <ul> <li>Control Panel &gt; Administrative Tools &gt; OBDC Data Source Administrator (64-bit)</li> <li>Programs &gt; Windows Administrative Tools &gt; OBDC Data Source Administrator (64-bit)</li> <li>Search for ODBC &gt; OBDC Data Source Administrator (64-bit)</li> </ul> <p>Select the Drivers tab and look in the list for ODBC Driver [xx] for SQL Server</p> <p>If it is not listed, download and install the ODBC driver from:</p> <p>https://learn.microsoft.com/en-us/sql/connect/odbc/download-odbc-driver-for-sql-server</p>"},{"location":"Connection/Clients/ODBC_DSN/#set-up-a-user-dsn","title":"Set up a User DSN","text":"<p>A [Machine] User DSN stores the connection information in the Windows Registry of the computer making it only available to the creating user and not able to be copied for one PC to another. For these reasons, it is best to set up a User DSN, rather than a System or File DSN.</p> <p>In the ODBC Data Source Administrator (64-bit) app select the User DSN tab.</p> <p>Click Add and in the Pop Up choose the ODBC Driver [xx] for SQL Server and click Finish.</p> <p></p> <p>In the new Pop Up, add the following information:</p> <p>Name: ELDB Server</p> <p>Description: ELDB Server connection</p> <p>Server: tcp:eldb.qmul-ceg.net</p> <p></p> <p>Click Next</p> <p>In the next screen, select With SQL Server authentication using a login ID\u2026 and enter your login ID and password.</p> <p></p> <p>Click Next.</p> <p>For the next few screens, ODBC Driver 18 for SQL Server has a slightly different setup to ODBC Driver 17 for SQL Server and earlier. Please follow the appropriate instructions.</p> ODBC Driver 18 for SQL Server <p>Click Next.</p> <p>Click Next again to move on 2 screens.</p> <p>Tick Trust server certificate</p> <p></p> <p>Click Back to navigate to the previous screen.</p> <p>Change the default database to the most recent ELDB database or the one you usually connect to eg eldb2023. You will get a list of databases present on the ELDB server to choose from. Ignore any databases with suffixes (eg eldb2020_DEV) and any other non \u2018eldb\u2019 database names.</p> <p>Note: this is the default database for the DSN. Other databases can be specified where it is used in an application.</p> <p>Change the Application intent to READONLY.</p> <p></p> <p>Click Next to return to the Trust server screen.</p> <p>Click Finish.</p> ODBC Driver 17 for SQL Server and earlier <p>Click Next.</p> <p>Change the default database to the most recent ELDB database or the one you usually connect to eg eldb2023. Will get a list of databases present on the ELDB server to choose from. Ignore any databases with suffixes (eg eldb2020_DEV) and any other non \u2018eldb\u2019 database names. Change the Application intent to READONLY</p> <p></p> <p>Click Next.</p> <p>Tick Use strong encryption for data and Trust server certificate</p> <p></p> <p>Click Finish.</p>"},{"location":"Connection/Clients/ODBC_DSN/#check-the-connection","title":"Check the Connection","text":"<p>For either Driver version, you should now reach a preview of the DSN configuration.</p> <p></p> <p>Click Test Data Source.</p> <p>If the connection fails, check back through the settings and re-enter your password \u2013 the password needs re-entering every time the DSN is edited or reviewed.</p> <p>Once the Test works, Click OK.</p> <p>The newly created DSN should be listed in the User DSN list.</p> <p>Click OK to close the window.</p> <p>Backlinks:</p>"},{"location":"Connection/Clients/PowerQuery/","title":"Power Query","text":""},{"location":"Connection/Clients/PowerQuery/#power-query-overview","title":"Power Query Overview","text":"<p>Power Query is a data preparation application integrated into many of Microsoft data products, most notably Excel 2016+ and Power BI. Similar to Microsoft Access, it is possible to link tables within an East London Database using an ODBC driver within a user DSN. This should be setup to not download or copy the data to your device.</p>"},{"location":"Connection/Clients/PowerQuery/#odbc-driver-and-user-dsn","title":"ODBC Driver and User DSN","text":"<p>Before continuing with this setup, make sure you have completed the ODBC driver setup and created a User DSN on your laptop or PC.</p>"},{"location":"Connection/Clients/PowerQuery/#switch-off-data-load","title":"Switch Off Data Load","text":"<p>By default, Power Query will load the entire data connection, in this case an ELDB table, into the memory of its data model or into the Excel workbook. As some tables are millions of rows in size, this can take up a lot of memory and cause your application or device to slow down or even crash. It can also contravenes the CEG Data Policy that whole tables should not be downloaded to a local machine. It is important, therefore, to switch off this default setting.</p>"},{"location":"Connection/Clients/PowerQuery/#excel","title":"Excel","text":"<p>Go to Get Data and select Query Options. Under Global, select Data Load and change the Default Query Load Settings to Specify custom default load setting. Make sure Load to worksheet and Load to Data Model are unticked. Click OK. </p>"},{"location":"Connection/Clients/PowerQuery/#power-bi","title":"Power BI","text":"<p>Power BI does not have a global data load setting and some this must be managed for each linked table. When selecting a linked table from the Navigator (see below), do not choose to Load the data. Select Transform Data to open the Power Query window, with the selected data links (queries). Right click on a query and untick Enable Load.</p> <p></p>"},{"location":"Connection/Clients/PowerQuery/#connecting-with-excel-power-bi","title":"Connecting with Excel / Power BI","text":"<p>Both Excel and Power BI use a similar GUI for external data connections. Select an ODBC connection:</p> Excel <p>Go to Get Data &gt;&gt;  From Other Source_s &gt;&gt; _From ODBC.</p> <p> </p> Power BI <p>Go to Get Data &gt;&gt;  More\u2026 &gt;&gt; Other &gt;&gt; ODBC, and click Connect.</p> <p> |</p> <p>In the From ODBC pop up, select the name of the DSN you created and OK.</p> <p></p> <p>Select Link the data source by creating a linked table and select OK.</p> <p>If required, provide your ELDB Server username and password.</p> <p>In the Navigator window, select the table(s) you wish to link and click Transform Data to open the Power Query window, with the selected data links, for further querying.</p>"},{"location":"Connection/Clients/RStudio/","title":"R and RStudio","text":""},{"location":"Connection/Clients/RStudio/#rstudio-overview","title":"RStudio Overview","text":"<p>RStudio is an IDE for the R programming language, which is mainly used for statistical analysis.</p>"},{"location":"Connection/Clients/RStudio/#connecting-to-sql-server","title":"Connecting to SQL Server","text":"<p>R requires the following libraries to connect to an SQL server in R:</p> <ul> <li>odbc \u2013 to make the connection to the ELDB server.</li> <li>rstudioapi \u2013 to provide a secure password entry.</li> <li>dplyr \u2013 to provide some query syntax.</li> <li>dbplyr \u2013 to translate the dplyr syntax to SQL.</li> </ul> <p>Import the libraries and create a connection in your RStudio console (replace { } with own credentials):</p> <pre><code>&gt; library(dplyr)\n&gt; library(dbplyr)\n&gt; library(odbc)\n&gt; library(rstudioapi)\n&gt; eldb_con &lt;- dbConnect(odbc(),\n+                  Driver = \"SQL Server\"\n+                  Server = \"\"eldb.qmul-ceg.net) \n+                  Database = \"eldb2025\" \n+                  UID = \"{ceg username}\" \n+                  PWD = rstudioapi::askForPassword(\"Database Password\"),  \n+                  Port = 1433)\n</code></pre> <p>A pop-up box will appear asking for your database password.</p> <p></p> <p>Once you enter your password, you are fully connected to the database and can now access all the available databases and tables under the Connections tab.</p> <p></p> <p>The dbplyr and dplyr libraries provide the syntax to pass the SQL data into R table objects.</p> <pre><code>&gt; diabetes&lt;-tbl(eldb_con, \"diabetes\")\n&gt; glimpse(diabetes)\n&gt; diabetes %&gt;%\n+     filter(area_id ==\"CH\") %&gt;%\n+     group_by(ods_code)\n</code></pre> <p>Or the database can be queried directly using SQL.</p> <pre><code>&gt; diabetes_tbl&lt;-dbFetch(\n+     dbSendQuery(eldb_con, \"SELECT TOP 10 * FROM diabetes\"))\n&gt; print(diabetes_tbl)\n</code></pre>"},{"location":"Connection/Clients/SQLCMD/","title":"SQLCMD","text":""},{"location":"Connection/Clients/SQLCMD/#sqlcmd-overview","title":"SQLCMD Overview","text":"<p>The SQL Server Command Line Tool (SQLCMD utility) is a SQL utility within the Command Prompt or PowerShell, installed with SSMS and the ODBC for SQL Server driver. It is useful for managing your password on the ELDB SQL Server, as this is less easily managed in the DSN or in DBeaver.</p>"},{"location":"Connection/Clients/SQLCMD/#check-for-sqlcmd","title":"Check for SQLCMD","text":"<p>To check if SQLCMD utility is installed on your PC, open a Command Prompt or PowerShell and type: <pre><code>sqlcmd -?\n</code></pre> If the SQLCMD utility is installed, the version number and list of available commands will displayed.</p> <p>If SQLCMD is not installed, it can be downloaded from Microsoft.</p>"},{"location":"Connection/Clients/SQL_Clients/","title":"SQL Clients","text":""},{"location":"Connection/Clients/SQL_Clients/#sql-overview","title":"SQL Overview","text":"<p>The ELDB Server can be accessed directly using any SQL client software with capabilities for connect to Microsoft SQL Server.  This is the recommended method for using the ELDB databases.</p>"},{"location":"Connection/Clients/SQL_Clients/#sql-server-management-studio-ssms","title":"SQL Server Management Studio (SSMS)","text":"<p>SQL Server Management Studio (SSMS) is the SQL client provided by Microsoft. It can be downloaded for free from Microsoft.</p> <p>All required drivers are installed with the application. A DSN is NOT required.</p> <p>Open SSMS and select Connect Object Explorer\u2026 from either the File menu or the  icon at the top of the Object Explorer panel. A login window will appear. Enter the ELDB access credentials that you have been given and click Connect.</p> <p></p>"},{"location":"Connection/Clients/SQL_Clients/#visual-studio-code-vscode","title":"Visual Studio Code (VSCode)","text":"<p>Visual Studio Code (VSCode) is Microsoft's open-source Code Editor that uses Extensions to support a large range of programs, connections and activities.  The SQL Server extension enables VSCode to connect and query MSSQL. No DSN setup is required and VSCode installs without requiring admin rights. The guide below is for Azure Data Studio, but the Visual Studio Code extension has a very similar interface.</p>"},{"location":"Connection/Clients/SQL_Clients/#azure-data-studio-ads","title":"Azure Data Studio (ADS)","text":"<p>Azure Data Studio is an open-source SQL client developed by Microsoft from the VSCode SQL Server extension.  However, Microsoft are retiring Azure Data Studio Feb 28th 2026 in favour of the Visual Studio Code extension. More details here.</p> <p>Open ADS and select the top icon, Connections, from the lefthand sidebar. This will open the Connections panel. At the top of this panel, click on the left-hand icon (circled in red below) to create a New Connection.</p> <p></p> <p>The Connection panel will open on the right-hand side with the Connection Details section at the bottom.</p> <p></p> <ul> <li>Change the Authentication type to \u2018SQL Login\u2019 and enter the ELDB credentials that you have been given in the Server, User name and _Password* sections. Tick Remember password.</li> <li>Database can be set to a specific database, such as \u2018eldb2024\u2019 \u2013 this will set the connection to that specific database. Alternatively, Database can be left as \u2018Default\u2019 \u2013 this will set the connection to ELDB server, allowing you to see all the databases on the server. You will only be able to access, however, the databases to which you have been given the relevant permissions. See below for screenshots.</li> <li>Change Trust server certificate to \u2018True\u2019.</li> <li>Provide a suitable name for the connection in the Name(optional) section.</li> <li>Click Connect</li> </ul> <p>If your password needs changing, the Change Password box will appear when you press Connect or when you select the Database. Choose a new password and OK.  </p> <p>If you get a 'Connection error' warning, click Enable trust server certificate. This will set the Trust server certificate section in the Connection Details to \u2018True\u2019. </p> <p>As explained above, connections using Default will display all the databases on the server. Connections made to a specific database will show just that database. You can set up multiple connections, of either type, and group them in the Connections panel. Below, each ELDB database has a separate connection under a \u2018ELDB\u2019 group.</p> <p></p> <p>Whereas a 'Default' connection displays all the available databases on the server.  In each case, the database expands to a list of schemas and system folders. The database tables can be found under the <code>dbo</code> schema.</p> <p></p>"},{"location":"Connection/Clients/SQL_Clients/#dbeaver-and-other-sql-clients","title":"DBeaver and Other SQL Clients","text":"<p>DBeaver is a SQL client that can connect to many different types of database. The free Community version is available from https://dbeaver.io and a portable version, that does not require an administrative login, can be downloaded from https://portapps.io/app/dbeaver-portable/. Other SQL clients can be used and will follow a similar connection process.</p> <p>Open a connection wizard by clicking on the plug icon in the upper left corner of the application window or go to Database &gt;&gt; New Database Connection. The database selection window will open with a long list of database connections. Select SQL Server and click Next.</p> <p>Enter your ELDB access credentials, including your newly created password. Click Finish.</p> <p>]</p> <p>DBeaver will assess the connection requirements and may request that a JDBC driver is installed. Click OK and the driver will be automatically downloaded and installed.</p> <p>Backlinks:</p>"},{"location":"Data/Accommodation/","title":"Accommodation Tables","text":""},{"location":"Data/Accommodation/#accommodation-overview","title":"Accommodation Overview","text":"<p>The Accommodation tables contain recent information on patient housing and accommodation.</p>"},{"location":"Data/Accommodation/#common-fields","title":"Common Fields","text":"<p>Each table has the following fields:</p> fieldname description label descriptive label of the table contents. eg 'diabetes' area_id area id for GP Practice ods_code ODS (Organisation Data Service) identifier for the GP Practice. person_id identifier of person patient_id identifier of patient at a practice"},{"location":"Data/Accommodation/#information-format","title":"Information format:","text":"<p><code>table name</code> (relationship) Measure (full title and synonyms) The business rules syntax used to create the table with (CLUSTER ID)s and date ranges.  Table of fieldnames + description specific to the table Additional information </p>"},{"location":"Data/Accommodation/#status_household","title":"<code>status_household</code>","text":"<p>Household assignment data calculated using the ASSIGN algorithm.</p> Field name Description <code>match_status_id</code> Internal ID for ASSIGN processing outcome <code>match_status</code> ASSIGN outcome for household residency status. One of:<code>1</code> = Residency<code>2</code> = Non-Residential Property<code>3</code> = Imprecise Match<code>4</code> = Multiple Address<code>5</code> = No Match Data<code>6</code> = Improbable <code>property_id</code> Internal database ID for property matched by ASSIGN <code>patient_count</code> Count of patients found at the <code>property_id</code> <p>See Analysis: Household for more details.</p> <p>Backlinks:</p>"},{"location":"Data/Core/","title":"Core (Current Registered Patients)","text":""},{"location":"Data/Core/#core-overview","title":"CORE Overview","text":"<p>The <code>CORE</code> table is the central table of the database, holding the details of all patients registered with a NEL GP Practice on the run date.</p>"},{"location":"Data/Core/#core-current-register","title":"<code>CORE</code> (Current Register)","text":"<p>Regular registration with a start date prior to the run date and an end date NULL or after the run date, at a currently active GP Practice. Excluding patients with Date of Death &gt;= run date or with a record indicating patient has died Excluding patients identifiable as Dummy/Test patients based on patient's name (eg 'Testy McTestface' or 'Mickey Mouse') Excluding patients aged &gt;= 120 years. </p> fieldname description relrun_date relative run date for the database build person_id identifier of person across multiple NHS organisations. Analogous to NHS Number. patient_id identifier of patient at a practice. Analogous to EMIS number. age age in years of patient on the run date sex sex (Female, Male, Other, Unknown) for patient area_id area id for GP Practice (CH, NH, TH, WF, BK, HV, RB). ods_code ODS (Organisation Data Service) identifier for the GP Practice. practice_name GP Practice name, as defined for CEG reporting. This may differ from the name on ODS records. reg_date calculated registration date for patient at practice ethnicity_code latest ethnicity SNOMED concept id. ethnic_5 ethnicity 5+1 (2011) categorisation (eg W, M, U) ethnic_16 ethnicity 16+1 categorisation (eg A-Z,99) ethnic_18 ethnicity 18+1 categorisation (eg W1-O9, NS, UU) ethnic_19 ethnicity 19+1 categorisation (eg W1-O9, NS, UU) pt_lad2023 Local Authority District ONS code (2023) based on patient's identified current address pt_area_id area_id based on patient's identified current addressNULL means the patient lives outside the North East London ICB area. lsoa_2011 LSOA (Lower Super Output Area) for 2011 relating to the patient's identified current address. imd2019 Indices of Multiple Deprivation score calculated by ONS in 2019 (England only) imd2019_rank IMD rank by country calculated by ONS lsoa2021 ONS (e-code) for LSOA 2021 <p>Note:  Because of the difficulties identifying some registrations, there are some persons (<code>person_id</code>) that appear as multiple patients (<code>patient_id</code>) at different practices. This may be due to patients moving practice; errors in the registration data held by a practice; or a patient deliberately registering and receiving healthcare with multiple practices. It is not possible to better define or clean the data. For most analyses, we recommend using <code>patient_id</code>.</p>"},{"location":"Data/Core/#core-views","title":"CORE Views","text":"<p>Views are virtual tables within a SQL database that provide a specified subset of the actual data.  Within some applications, such MS Access, Views will appear as standard tables and can be linked for use in queries in the same way.</p> <p>A series of Views are provided that filter the CORE table for each area.</p>"},{"location":"Data/Core/#core-area-patient-registration","title":"CORE Area: Patient Registration","text":"<p>View based on <code>area_id</code>, which is defined by the location of the registered GP Practice.</p> <p><code>CORE_BK</code> <code>CORE_CH</code> <code>CORE_HV</code> <code>CORE_NH</code> <code>CORE_RB</code> <code>CORE_TH</code> <code>CORE_WF</code> </p>"},{"location":"Data/Core/#core-area-patient-residency","title":"CORE Area: Patient Residency","text":"<p>View based on <code>pt_area_id</code>, which is defined by patient's identified current address. These are the patients actually resident within the borough.</p> <p><code>CORE_BK_pt</code> <code>CORE_CH_pt</code> <code>CORE_HV_pt</code> <code>CORE_NH_pt</code> <code>CORE_RB_pt</code> <code>CORE_TH_pt</code> <code>CORE_WF_pt</code> </p> <p>Backlinks:</p>"},{"location":"Data/Database_Info/","title":"Database Information","text":""},{"location":"Data/Database_Info/#database-overview","title":"Database Overview","text":"<p>All ELDB databases are primarily based on a star schema consisting of a central CORE table, containing every registered patient (1 line per patient), linked by a patient identifier to multiple tables containing the details for patients found for specific Registers, Measures and Activities. Additional columns and Lookup tables are provided where useful to assist with classification and categorisation.</p> <p>The database schema, build history and design is set out in the following tables:</p>"},{"location":"Data/Database_Info/#db_tables-tables-in-database","title":"<code>db_tables</code> (tables in database)","text":"<p>List of all tables within the database</p> fieldname description sc table schema table_name table name object_id table id, as defined by server create_date creation date of table create_time creation time of table modified_date last modification date of table modified_time last modification time of table column_count count of columns within table row_count count of rows in table"},{"location":"Data/Database_Info/#db_columns-columns-in-tables","title":"<code>db_columns</code> (columns in tables)","text":"<p>List of all columns within the database</p> fieldname description sc table schema table_name table name object_id table id, as defined by server column_id column id and order of column within table column_name column name datatype column data type max_length maximum length of data within column is_nullable column may contain NULLs. Yes (1) or No (0). is_primary_key column is included within the table's Primary Key is_index column is included within a table index record_count count of record entries in column"},{"location":"Data/Database_Info/#db_clusters-code-clusters-in-tables","title":"<code>db_clusters</code> (code clusters in tables)","text":"<p>List of code clusters within the database</p> fieldname description id code id within the table cluster_id code cluster id cluster_description description of code cluster id refset_id SNOMED refset for cluster_id source source of the code cluster (PCD / CEG) table_name table name"},{"location":"Data/Database_Info/#db_codes-codes-in-columns","title":"<code>db_codes</code> (codes in columns)","text":"<p>List of codes found in each code column, with count of code.</p> fieldname description id code id within the table table_name table name column_name column name code SNOMED code code_name code description code_count count of codes within column <p>See the NHS Digital PCD Portal for more information on the standard codesets.</p>"},{"location":"Data/Database_Info/#db_routines-routines-in-database","title":"<code>db_routines</code> (routines in database)","text":"<p>List of all stored procedures and functions within the database. Use for build and admin.</p> fieldname description sc routine schema routine_name routine name object_id id, as defined by server type routine type (P = stored procedure, FN = function, TT = table type) create_date creation date create_time creation time modified_date last modification date modified_time last modification time"},{"location":"Data/Database_Info/#db_codesets-codesets-in-build","title":"<code>db_codesets</code> (codesets in build)","text":"<p>Codesets for clusters used in database build.</p> fieldname description id code id within the table source codeset source (CEG, PCD = Primary Care Domain) ruleset analysis groups or NHS services using cluster_id cluster_id code cluster id cluster_description description of code cluster id code SNOMED code code_description Description of code scheme identifier of code scheme (71 = SNOMED)"},{"location":"Data/Database_Info/#db_counts-row-counts-of-tables","title":"<code>db_counts</code> (row counts of tables)","text":"<p>Patient counts by Practice for each Register and Activity table within the database.</p> fieldname description area_id area id for GP Practice ods_code ODS (Organisation Data Service) identifier for the GP Practice. practice_name GP Practice name. clinical_system clinical data system (EMIS, SystmOne) used within the GP Practice. This is based on information from CEG reporting. column for each register/activity table patient count for table by GP Practice."},{"location":"Data/Database_Info/#db_version","title":"<code>db_version</code>","text":"<p>Database version control</p> fieldname description id table id version database version as 'major.minor.revision' major major version id - database year minor minor version id revision revision or patch id version_date date version updated <p>Backlinks:</p>"},{"location":"Data/Lookup/","title":"Lookup Tables","text":""},{"location":"Data/Lookup/#lookup-tables-overview","title":"Lookup Tables Overview","text":"<p>The lookup tables (prefixed with <code>lu_</code>) contain code maps and categorisations to help with data analysis.</p>"},{"location":"Data/Lookup/#information-format","title":"Information format:","text":"<p><code>table name</code> Summary explanation of the table's purpose.  Table of fieldnames + description specific to the table. Non-Duplicate field shown in bold as the main lookup field. Additional information Supporting tables, such as keys for main table</p>"},{"location":"Data/Lookup/#lu_ageband","title":"<code>lu_ageband</code>","text":"<p>Age banded by a selection age band standards.</p> fieldname description age patient age five_year five-year age bands (A:0-4 ~ W:110-114) five_year_term five-year age bands text term ten_year ten-year age bands (A:0-9 ~ L:110-119) ten_year_term ten-year age bands text term ons_a ONS A age bands (A:0-24 ~ D:65-119) ons_a_term ONS A age bands text term ons_b ONS B age bands (A:0-24 ~ E:75-119) ons_b_term ONS B age bands text term ons_c ONS C age bands (A:0-15 ~ I:85-119) ons_c_term ONS C age bands text term ons_d ONS D age bands (A:0-4 ~ R:85-119) ons_d_term ONS D age bands text term ons_e ONS E age bands (A:0-84 ~ F:105-119) ons_e_term ONS E age bands text term ons_f ONS F age bands (A:0-4 ~ S:90-119) ons_f_term ONS F age bands text term ons_g ONS G age bands (A:0-15 ~ C:65-119) ons_g_term ONS G age bands text term esp_1976 European Std Population 1976 (A:0-4 ~ R:85-111) esp_1976_term European Std Population 1976 text term esp_2013 European Std Population 2013 (A:0, B:1-4, C:5-9 ~ U:95-111) esp_2013_term European Std Population 2013 text term eth_band ethnicity report bands (A:0-4 ~ E:65-119) eth_band_term ethnicity report band text term profile_a population profiling a bands (A:16-18 ~ J:85-119) profile_a_term population profiling a bands text term profile_b population profiling b bands (A:0-4 ~ K:85-119) profile_b_term population profiling b bands text term ceg_piqi practice improvement quality indicators age bands (A:0-17 ~ D:65-119) ceg_piqi_term practice improvement quality indicators age bands text term"},{"location":"Data/Lookup/#lu_ageband_key","title":"<code>lu_ageband_key</code>","text":"<p>Full text terms for the Age Standard bandings in <code>lu_ageband</code></p> fieldname description age_std age banding standard band banding letter used with the age band standard term age band text term"},{"location":"Data/Lookup/#lu_imd2019","title":"## <code>lu_imd2019</code>","text":"<p>IMD 2019  (Indice of Multiple Deprivation) as calculated in 2019 against Lower Super Output Areas (LSOA) defined in 2011.  With national rankings and quintiles by ICB and Local Authority (LAD).</p> fieldname description lsoa2011 Lower Super Output Area ONS code defined in 2011 imd2019_score Indice of Multiple Deprivation calculated by ONS in 2019 (England only) country_id country identifier imd2019_rank IMD rank by country calculated by ONS imd2019_quintile IMD quintile by country imd2019_decile IMD decile by country icb Integrated Care Board ONS code(England only, otherwise defaults to country) icb_name ICB name icb_id ICB identifier imd2019_quintile_icb IMD quintile by ICB lad2023 Local Authority District ONS code defined in 2023 lad2023_name Local Authority District name imd2019_quintile_lad IMD quintile by LAD lad_id LAD identifier (London only) area_id area/LAD identifier (North East London only) area2_id combined area identifier (North East London only) <p>Note: The boundary changes in LSOA 2021 make it difficult to map to the LSOA 2011 based IMD 2019 scores and ranking.  See lu_lsoa2021 for more detail.  LSOA and IMD based on the patient's postcode are provided in CORE.</p> <p>For full information on LSOA and IMD see Analysis: LSOA &amp; IMD</p>"},{"location":"Data/Lookup/#area_id-and-area2_id-key","title":"<code>area_id</code> and `area2_id key","text":"identifier area BK Barking &amp; Dagenham CL City of London HK Hackney HV Havering NH Newham RB Redbridge TH Tower Hamlets WF Waltham Forest CH City &amp; Hackney BHR Barking &amp; Dagenham, Havering &amp; Redbridge TNW Tower Hamlets, Newham, &amp; Waltham Forest"},{"location":"Data/Lookup/#lu_localauthority","title":"<code>lu_localauthority</code>","text":"<p>ONS codes for local authorities with associated regional codes</p> fieldname description lad2023 Local Authority District ONS code defined in 2023 lad2023_name Local Authority District name lau2021 Local Administrative Unit 1 code defined in 2021 (district or unitary authorities) lau2021_name Local Administrative Unit name itl2021_3 International Territorial Level 3 code defined in 2021 (county, grouped district or unitary authorities) itl2021_3_name ITL3 2021 name itl2021_2 International Territorial Level 2 code defined in 2021 (large or grouped counties, urban district) itl2021_2_name ITL2 2021 name itl2021_1 International Territorial Level 1 code defined in 2021 (national region) itl2021_1_name ITL1 2021 name <p>Note:&gt;  Some LAD2023 breakdown into smaller LAU2021, which cause some duplication in the <code>lad2023</code> fields.  This is not the case, however, for authorities in London.</p>"},{"location":"Data/Lookup/#lu_ons","title":"<code>lu_ons</code>","text":"<p>ONS codes for Country, Region, NHS Region, County, ICB, Sub-ICB, Local Authority District, with ODS code and CEG short identifier where applicable.</p> fieldname description id table id ons_field field name as found in ONS datasets field_description description of ONS field classification_year year associated with ONS field category ons_code ONS code ods_code ODS code if applicable name area or organisation name short_id short identifier for name"},{"location":"Data/Lookup/#lu_lsoa2021","title":"<code>lu_lsoa2021</code>","text":"<p>Lower Super Output Area (LSOA) defined in 2021 within England and Wales with associated LSOA 2011, LAD 2022 + LAD 2019 (Local Authority), and IMD score 2019</p> fieldname description id table id lsoa2021_code ONS (e-code) for LSOA 2021 lsoa2021_name LSOA 2021 name (Local Authority name &amp; identifier) changed relationship indicator for LSOA2011 to LSOA2021 (U, S, M, X) lsoa2011_code ONS code (e-code) for LSOA 2011 lsoa2011_name LSOA 2011 name (Local Authority name &amp; identifier) lad2022_code ONS code (e-code) 2022 for local authority lad2022_name Local Authority name 2022 lad2022_name_wales Local Authority name 2022 (Welsh Language) lad2019_code ONS code (e-code) 2019 for local authority lad2019_name Local Authority name 2019 imd2019_score Indices of Multiple Deprivation score calculated by ONS imd2019_quintile Indices of Multiple Deprivation quintile calculated for England"},{"location":"Data/Lookup/#changed-key","title":"<code>changed</code> key","text":"identifier change action U unchanged S split M merged X fragmented <p>For more information, see the ONS Open Geography Portal.</p>"},{"location":"Data/Lookup/#lu_ethnicity2","title":"<code>lu_ethnicity2</code>","text":"<p>Revised SNOMED to ethnicity categorisations for 5+1, 16+1, 18+1 and 19+1 based on 2021 census, with code count and Read2/CTV3 mapping.</p> fieldname datatype nullable description id int 0 row id dbid int 1 compass cim id code_count int 1 count of code recorded in <code>observation</code> (at Feb 2025) sn_code varchar(20) 1 SNOMED code sn_name varchar(200) 1 SNOMED code name sn_description varchar(200) 1 SNOMED code description ethnall varchar(50) 1 code included in the PCD ETHNALL refset eth2016 varchar(50) 1 code included in the PCD ETH2016 refset ethnicitynd varchar(50) 1 code included in the PCD ETHNICITYND refset ethnic_5a int 1 ethnicity 5+1 (2001) categorisation (0-6) ethnic_5a_name varchar(50) 1 ethnicity 5+1 (2001) category names ethnic_16 varchar(2) 1 ethnicity 16+1 categorisation (eg A-Z,99) ethnic_16_name varchar(50) 1 ethnicity 16+1 category names ethnic_5 varchar(1) 1 ethnicity 5+1 (2011) categorisation (eg W, M, U) ethnic_5_name varchar(50) 1 ethnicity 5+1 (2011) category names ethnic_18 varchar(2) 1 ethnicity 18+1 categorisation (eg W1-O9, NS, UU) ethnic_18_name varchar(150) 1 ethnicity 18+1 category names ethnic_19 varchar(2) 1 ethnicity 19+1 categorisation (eg W1-O9, NS, UU) ethnic_19_name varchar(150) 1 ethnicity 19+1 category names r2_code varchar(max) 1 mapped Read2 codes r3_code varchar(max) 1 mapped Read3/CTV3 codes"},{"location":"Data/Lookup/#lu_ethnicity2_map","title":"<code>lu_ethnicity2_map</code>","text":"<p>Cross reference for ethnic categories to ensure consistency across categorisations.</p> fieldname datatype nullable description id int 0 row id ethnic_5a int 0 ethnicity 5+1 (2001) categorisation (0-6) ethnic_5a_name varchar(50) 1 ethnicity 5+1 (2001) category names ethnic_16 varchar(2) 0 ethnicity 16+1 categorisation (eg A-Z,99) ethnic_16_name varchar(50) 1 ethnicity 16+1 category names ethnic_5 varchar(1) 0 ethnicity 5+1 (2011) categorisation (eg W, M, U) ethnic_5_name varchar(50) 1 ethnicity 5+1 (2011) category names ethnic_18 varchar(2) 0 ethnicity 18+1 categorisation (eg W1-O9, NS, UU) ethnic_18_name varchar(150) 1 ethnicity 18+1 category names ethnic_19 varchar(2) 0 ethnicity 19+1 categorisation (eg W1-O9, NS, UU) ethnic_19_name varchar(150) 1 ethnicity 19+1 category names <p>Note: Fieldnames have been revised to a simpler <code>ethnic_</code>+ number of categories, eg <code>ethnic_18</code>. Where needed, a letter suffix differentiates categories with the same number of categories, eg <code>ethnic_5</code> and <code>ethnic_5a</code>.    - <code>ethnic_5a</code> &amp; <code>ethnic_16</code> based on 2001 census. Used as standard NHS categories. Chinese classifed as O Other ethnic group / R Chinese - <code>ethnic_5</code> &amp; <code>ethnic_18</code> based 2011 census, also known as Self Defined Ethnicity (SDE). Used by public services and in Governmental reporting. Chinese reclassifed as A Asian / A4 Chinese. Arab added as O Other ethnic group / O2 Arab - <code>ethnic_19</code> based 2021 census. Roma added as W White / W9 Roma  </p>"},{"location":"Data/Lookup/#lu_practice","title":"<code>lu_practice</code>","text":"<p>GP Practices in North East London</p> fieldname description area_id area identifier for GP Practice (CH, NH, TH, WF, BK, HV, RB). This equates to the former CCGs and current Place-Based Partnerships or Areas within the North East London ICB. area area name ods_code ODS (Organisation Data Service) identifier for the GP Practice. https://odsportal.digital.nhs.uk/ practice_name GP Practice name, as defined for CEG reporting. This may differ from the name on ODS records. listsize currently registered patient count for practice at the run date status activity status for the practice at the run date (active, inactive) start_date date the practice opened end_date date the practice closed pcn_ods ODS identifier for the Primary Care Network (PCN) associated with the practice pcn_name name of associated PCN clinical_system clinical data system used by the practice (EMIS, SystmOne) uprn Unique Property Reference Number (UPRN) identifier for the address of the practice. https://uprn.uk/"},{"location":"Data/Lookup/#lu_smoking","title":"<code>lu_smoking</code>","text":"<p>Categorisation of smoking codes for Current, Ex and Non Smoker.</p> fieldname description id row identifier code code (SNOMED, Read2, CTV3, EMIS Local) scheme code scheme identifier (71, 1040444, 1130062, 1335379) name code text description ndasmok_cod code cluster id for National Diabetes Audit (NDA): (NDASMOK_COD) smok_cod code cluster id for QOF: (SMOK_COD, NULL) smok_status_qof code cluster id for QOF: (LSMOK_COD, EXSMOK_COD, NSMOK_COD, NULL) smok_status smoking status calculated from QOF &amp; NDA cluster + code term (CSMOK, NONSMOK, EXSMOK, NSMOK, UNKNOWN) dbid compass identifier for code sn_dbid compass identifier for SNOMED code associated with code"},{"location":"Data/Lookup/#code-scheme-key","title":"code <code>scheme</code> key","text":"identifier code scheme 71 SNOMED 1040444 Read 2 1130062 CTV3 1335379 EMIS Local"},{"location":"Data/Lookup/#smok_status-key","title":"<code>smok_status</code> key","text":"identifier smoking status LSMOK_COD Smoker EXSMOK_COD Exsmoker NSMOK Never Smoked CSMOK Current Smoker NONSMOK Current Non-Smoker EXSMOK Exsmoker UNKNOWN smoking status cannot be defined"},{"location":"Data/Lookup/#lu_smoking_key","title":"<code>lu_smoking_key</code>","text":"<p>Full terms for <code>lu_smoking.dbo.smok_status</code> identifiers</p> fieldname description Id numeric identifier to smoking status smok_status smoking status name name term for smoking status <p>Backlinks:</p>"},{"location":"Data/Measures/","title":"Measure Tables","text":""},{"location":"Data/Measures/#measures-overview","title":"Measures Overview","text":"<p>The measure tables contain test results with values for all patients, split into physiological related areas for ease of use.  Checks should be undertaken to verify that the values are within expected clinical ranges. </p>"},{"location":"Data/Measures/#common-fields","title":"Common Fields","text":"<p>Each table has the following fields:</p> fieldname description label descriptive label of the table contents. eg 'diabetes' area_id area id for GP Practice ods_code ODS (Organisation Data Service) identifier for the GP Practice. person_id identifier of person patient_id identifier of patient at a practice"},{"location":"Data/Measures/#information-format","title":"Information format:","text":"<p><code>table name</code> (relationship) Measure (full title and synoymns) The business rules syntax used to create the table with (CLUSTER ID)s and date ranges.  Table of fieldnames + description specific to the table Additional information  </p>"},{"location":"Data/Measures/#measures_blood-blood-related","title":"<code>measures_blood</code> (Blood related)","text":"<p>Measurements of components or substances found within blood.</p>"},{"location":"Data/Measures/#hba1c-glycated-haemoglobin","title":"HbA1c (Glycated Haemoglobin)","text":"<p>HbA1c IFCC code (IFCCHBAM_COD)</p> fieldname description hba1c_latest_date latest date of HbA1c IFCC code hba1c_latest_code SNOMED concept id for latest HbA1c IFCC code hba1c_latest_name code term for latest HbA1c IFCC code hba1c_latest_value value associated to latest HbA1c IFCC code"},{"location":"Data/Measures/#cholesterol-total-serum","title":"Cholesterol (Total Serum)","text":"<p>Total Cholesterol code (CHOL2_COD)</p> fieldname description chol_latest_date latest date of Total Cholesterol code chol_latest_code SNOMED concept id for latest Total Cholesterol code chol_latest_name code term for latest Total Cholesterol code chol_latest_value value associated to latest Total Cholesterol code"},{"location":"Data/Measures/#fbg-fasting-plasma-glucose-fpg","title":"FBG (Fasting Plasma Glucose, FPG)","text":"<p>Fasting Plasma Glucose code (FASPLASGLUC_COD)</p> fieldname description fbg_latest_date latest date of Fast Blood Glucose code fbg_latest_code SNOMED concept id for latest Fast Blood Glucose code fbg_latest_name code term for latest Fast Blood Glucose code fbg_latest_value value associated to latest Fast Blood Glucose code"},{"location":"Data/Measures/#egfr-estimated-glomerular-filtration-rate","title":"eGFR (estimated Glomerular Filtration Rate)","text":"<p>eGFR code (EGFR_COD)</p> fieldname description egfr_latest_date latest date of eGFR code egfr_latest_code SNOMED concept id for latest eGFR code egfr_latest_name code term for latest eGFR code egfr_latest_value value associated to latest eGFR code"},{"location":"Data/Measures/#serum-creatinine","title":"Serum Creatinine","text":"<p>Serum Creatine code (CRE_COD)</p> fieldname description creat_latest_date latest date of Serum Creatine code creat_latest_code SNOMED concept id for latest Serum Creatine code creat_latest_name code term for latest Serum Creatine code creat_latest_value value associated to latest Serum Creatine code"},{"location":"Data/Measures/#liver-function-test","title":"Liver Function Test","text":"<p>Liver Function Test code (LFT_COD)</p> fieldname description lft_latest_date latest date of Liver Function Test code lft_latest_code SNOMED concept id for latest Liver Function Test code lft_latest_name code term for latest Liver Function Test code lft_latest_value value associated to latest Liver Function Test code <p>Note: Liver Function Test includes a range of tests assessing liver function.  This data shows the latest test recorded in the patient's record - other LFT tests may have been recorded on the same day.</p>"},{"location":"Data/Measures/#measures_body-body-related","title":"<code>measures_body</code> (Body related)","text":"<p>Measurements of the physical body.</p>"},{"location":"Data/Measures/#bmi-body-mass-index","title":"BMI (Body Mass Index)","text":"<p>BMI Value code (BMIVAL_COD)</p> fieldname description bmi_latest_date latest date of BMI code bmi_latest_code SNOMED concept id for latest BMI code bmi_latest_name code term for latest BMI code bmi_latest_value value associated to latest BMI code"},{"location":"Data/Measures/#measures_heart-heart-related","title":"<code>measures_heart</code> (Heart related)","text":"<p>Measurements of heart function.</p>"},{"location":"Data/Measures/#blood-pressure-bp","title":"Blood Pressure (BP)","text":"<p>Systolic / Diastolic Blood Pressure code (BP_COD)</p> fieldname description bp_latest_date latest date of Blood Pressure code bpsys_latest_code SNOMED concept id for latest Systolic Blood Pressure code bpsys_latest_name code term for latest Systolic Blood Pressure code bpsys_latest_value value associated to latest Systolic Blood Pressure code bpdia_latest_code SNOMED concept id for latest Diastolic Blood Pressure code bpdia_latest_name code term for latest Diastolic Blood Pressure code bpdia_latest_value value associated to latest Diastolic Blood Pressure code bpparent_latest_code SNOMED concept id for latest parent Blood Pressure code bpparent_latest_name code term for latest parent Blood Pressure code match_algorithm number code of the algorithm used for Blood Pressure match <p>Note: Parent Blood Pressure SNOMED code indicating a Blood Pressure activity, to which a Systolic and Diastolic code pair are linked.</p> <p>Match Algorithm 1. Systolic matched to diastolic using their common parent 2. Systolic matched to diastolic with nearest record id 3. Systolic matched to only diastolic recorded on the same date 4. Systolic matched to diastolic based ranked date and record id  </p> <p>For full information see Analysis: Blood Pressure</p>"},{"location":"Data/Measures/#pulse-rate","title":"Pulse Rate","text":"<p>Pulse Rate code (PLSRATE_COD)</p> fieldname description pulserate_latest_date latest date of Pulse Rate code pulserate_latest_code SNOMED concept id for latest Pulse Rate code pulserate_latest_name code term for latest Pulse Rate code pulserate_latest_value value associated to latest Pulse Rate code"},{"location":"Data/Measures/#measures_lung-lung-related","title":"<code>measures_lung</code> (Lung related)","text":"<p>Measurements of lung function.</p>"},{"location":"Data/Measures/#fev1fvc-ratio","title":"FEV1/FVC Ratio","text":"<p>FEV1/FVC Ratio code (FEV1FVC_COD)</p> fieldname description fev1fvc_latest_date latest date of FEV1/FVC Ratio code fev1fvc_latest_code SNOMED concept id for latest FEV1/FVC Ratio code fev1fvc_latest_name code term for latest FEV1/FVC Ratio code fev1fvc_latest_value value associated to latest FEV1/FVC Ratio code"},{"location":"Data/Measures/#mrc-breathlessness-score","title":"MRC Breathlessness Score","text":"<p>MRC Breathlessness Score code (MRC_COD)</p> fieldname description mrc_latest_date latest date of MRC code mrc_latest_code SNOMED concept id for latest MRC code mrc_latest_name code term for latest MRC code mrc_latest_value value associated to latest MRC code"},{"location":"Data/Measures/#measures_risk-risk-related","title":"<code>measures_risk</code> (Risk related)","text":"<p>Scores and indicators relating to clinical risk</p>"},{"location":"Data/Measures/#chadsvasc-cha2ds2vasc","title":"CHADSVASC (CHA<sub>2</sub>DS<sub>2</sub>VASc)","text":"<p>Risk of Stroke in patients with non-rheumatic Atrial Fibrillation CHADSVASC code (CHADVASC_COD)</p> fieldname description chadsvasc_latest_date latest date of CHA2DS2VASC code chadsvasc_latest_code SNOMED concept id for latest CHA2DS2VASC code chadsvasc_latest_name code term for latest CHA2DS2VASC code chadsvasc_latest_value value associated to latest CHA2DS2VASC code"},{"location":"Data/Measures/#qrisk","title":"QRISK","text":"<p>Risk of a CVD event within next 10 years QRISK code (QRISK2AND3SCORE_COD)</p> fieldname description qrisk_latest_date latest date of QRISK code qrisk_latest_code SNOMED concept id for latest QRISK code qrisk_latest_name code term for latest QRISK code qrisk_latest_value value associated to latest QRISK code"},{"location":"Data/Measures/#clinical-frailty-score","title":"Clinical Frailty Score","text":"<p>Assessment of overall fitness / frailty Clinical Frailty Score code (CLINFRAILSCR_COD)</p> fieldname description frailty_cfs_latest_date latest date of Clinical Frailty Score code frailty_cfs_latest_code SNOMED concept id for latest Clinical Frailty Score code frailty_cfs_latest_name code term for latest Clinical Frailty Score code frailty_cfs_latest_value value associated to latest Clinical Frailty Score code"},{"location":"Data/Measures/#electronic-frailty-index","title":"Electronic Frailty Index","text":"<p>Risk stratification of frailty calculated from patient record *Electronic Frailty Index code (FRAILEFI_CEG)</p> fieldname description frailty_efi_latest_date latest date of Electronic Frailty Index code frailty_efi_latest_code SNOMED concept id for latest Electronic Frailty Index code frailty_efi_latest_name code term for latest Electronic Frailty Index code frailty_efi_latest_value value associated to latest Electronic Frailty Index code"},{"location":"Data/Measures/#frailty-status","title":"Frailty Status","text":"<p>Frailty Status code (MILDFRAIL_COD, MODFRAIL_COD, SEVFRAIL_COD)</p> fieldname description frailty_status_latest_date latest date of Frailty Status code frailty_status_latest_code SNOMED concept id for latest Frailty Status code frailty_status_latest_name code term for latest Frailty Status code frailty_status_latest_value value associated to latest Frailty Status code frailty_status Rockwood Frailty Scale term derived from frailty_status_latest_name <p>Note: The <code>frailty_status</code> column simplifies the code term provided by the <code>fraility_status_latest_name</code> to provide a consistent Rockwood Frailty Scale term:</p> <p>Backlinks:</p>"},{"location":"Data/NHS_Health_Checks/","title":"NHS Health Check Tables","text":""},{"location":"Data/NHS_Health_Checks/#nhs-health-checks-overview","title":"NHS Health Checks Overview","text":"<p>The NHS Health Check tables contain recent information on NHS Health Checks (invited, done, declined) by patient.</p>"},{"location":"Data/NHS_Health_Checks/#common-fields","title":"Common Fields","text":"<p>Each table has the following fields:</p> fieldname description label descriptive label of the table contents. eg 'diabetes' area_id area id for GP Practice ods_code ODS (Organisation Data Service) identifier for the GP Practice. person_id identifier of person patient_id identifier of patient at a practice"},{"location":"Data/NHS_Health_Checks/#information-format","title":"Information format:","text":"<p><code>table name</code> (relationship) Measure (full title and synoymns) The business rules syntax used to create the table with (CLUSTER ID)s and date ranges.  Table of fieldnames + description specific to the table Additional information  </p>"},{"location":"Data/NHS_Health_Checks/#nhs_healthcheck-nhs-health-check-done-nhs-hc","title":"<code>nhs_healthcheck</code> (NHS Health Check done, NHS HC)","text":"<p>NHS Health Check code (NHSHC_CEG) recorded &gt;= last 5 years. Selecting earliest date from LTC table (hypertension, diabetes, atrial_fibrillation, ckd, stroke_tia, heart_failure, pad, f_hypercholesterolemia, prescribed_statins) as ineligibility date and table. </p> fieldname description earliest5y_date earliest date of health check code in last 5 years earliest5y_code SNOMED concept id for earliest code earliest5y_name code term for earliest code latest_date latest date of code for register latest_code SNOMED concept id for latest code latest_name code term for latest code inelig_earliest_date earliest date a patient became ineligible for an NHS Health Check inelig_table name/reason of ineligibility valid_nhshc NHS Health Check validity (Y/N) <p>For full information on NHS Health Checks and eligibility criteria see Analysis: NHS Health Checks</p>"},{"location":"Data/NHS_Health_Checks/#nhs_healthcheck_declined","title":"<code>nhs_healthcheck_declined</code>","text":"<p>NHS Health Check Declined code (NHSHCDEC_CEG) recorded &gt;= last 5 years. </p> fieldname description latest_date latest date of code for register latest_code SNOMED concept id for latest code latest_name code term for latest code"},{"location":"Data/NHS_Health_Checks/#nhs_healthcheck_invite","title":"<code>nhs_healthcheck_invite</code>","text":"<p>NHS Health Check Invite code (NHSHCINV_CEG) recorded &gt;= last 5 years. Selecting earliest date from LTC tables (hypertension, diabetes, atrial_fibrillation, ckd, stroke_tia, heart_failure, pad, f_hypercholesterolemia, prescribed_statins) as ineligibility date and table. </p> fieldname description latest_date latest date of code for register latest_code SNOMED concept id for latest code latest_name code term for latest code inelig_earliest_date earliest date a patient became ineligible for an NHS Health Check inelig_table name/reason of ineligibility valid_nhshc NHS Health Check validity (Y/N) <p>For full information on NHS Health Checks and eligibility criteria see Analysis: NHS Health Checks</p>"},{"location":"Data/NHS_Health_Checks/#nhs_healthcheck_elig2024","title":"<code>nhs_healthcheck_elig2024</code>","text":"<p>CORE 2024 table filtered for patients aged &gt;= 40 Excluding patients with an ELDB2024 record of Hypertension, Diabetes, CKD, Heart Failure, PAD, Familial Hypercholesterolemia, Stroke/TIA, CHD, Atrial Fibrillation, or Statin prescription. </p> fieldname description relrun_date relative run date for the database build person_id identifier of person across multiple NHS organisations. Analogous to NHS Number. patient_id identifier of patient at a practice. Analogous to EMIS number. age age in years of patient on the run date sex sex (Female, Male, Other, Unknown) for patient ethnicity_code latest ethnicity SNOMED concept id. ethnic_16 ethnicity 16+1 categorisation (eg A-Z,99) ethnic_5a ethnicity 5+1 (2001) categorisation (0-6) area_id area id for GP Practice (CH, NH, TH, WF, BK, HV, RB). ods_code ODS (Organisation Data Service) identifier for the GP Practice. practice_name GP Practice name, as defined for CEG reporting. This may differ from the name on ODS records. reg_date calculated registration date for patient at practice lsoa_2011 LSOA (Lower Super Output Area) for 2011 relating to the patient's identified current address. pt_area_id area_id based on patient's identified current address. NULL means the patient lives outside the North East London ICB area. <p>Note: Columns <code>ceg_16</code> and <code>nhs_5</code> have been renamed <code>ethnic_16</code> and <code>ethnic_5a</code> respectively in order to fit with the revised ethnicity tables.</p> <p>Backlinks:</p>"},{"location":"Data/Needs_%26_Status/","title":"Needs &amp; Status Tables","text":""},{"location":"Data/Needs_%26_Status/#needs-status-overview","title":"Needs &amp; Status Overview","text":"<p>The status tables contain recent information on social factors and needs affecting patients that may impact of their health and clinical treatment.</p>"},{"location":"Data/Needs_%26_Status/#common-fields","title":"Common Fields","text":"<p>Each table has the following fields:</p> fieldname description label descriptive label of the table contents. eg 'diabetes' area_id area id for GP Practice ods_code ODS (Organisation Data Service) identifier for the GP Practice. person_id identifier of person patient_id identifier of patient at a practice"},{"location":"Data/Needs_%26_Status/#information-format","title":"Information format:","text":"<p><code>table name</code> (relationship) Measure (full title and synoymns) The business rules syntax used to create the table with (CLUSTER ID)s and date ranges.  Table of fieldnames + description specific to the table Additional information </p>"},{"location":"Data/Needs_%26_Status/#status_homeless","title":"<code>status_homeless</code>","text":"<p>Homelessness code (HOMELESS_COD).</p> fieldname description latest_date latest date of code for register latest_code SNOMED concept id for latest code latest_name code term for latest code"},{"location":"Data/Needs_%26_Status/#status_housebound","title":"<code>status_housebound</code>","text":"<p>Housebound code (HOUSEBOUND_CEG).</p> fieldname description latest_date latest date of code for register latest_code SNOMED concept id for latest code latest_name code term for latest code"},{"location":"Data/Needs_%26_Status/#status_carer","title":"<code>status_carer</code>","text":"<p>Carer code (ISACARER_COD), excluding patients with a more recent Not A Carer code (NOTACARER_COD).</p> fieldname description latest_date latest date of code for register latest_code SNOMED concept id for latest code latest_name code term for latest code"},{"location":"Data/Needs_%26_Status/#status_interpreter-interpreter-required","title":"<code>status_interpreter</code> (interpreter required)","text":"<p>Includes interpreter requirement codes (REQINTERPRETER_CEG, NOINTERPNEEDED_CEG), spoken language interpreter codes (SPOKENLANGINTERP_CEG), preferred language codes, and communication support codes (COMSSUPPORT_CEG) including deafblind, sign language, lip-speaker, speech-to-text reporting, and advocate.</p> fieldname description interpreter_latest_date latest date of code for interpreter needed register interpreter_latest_code SNOMED concept id for latest interpreter needed code interpreter_latest_name code term for latest interpreter needed code interpreter_lang_latest_date latest date of code for language interpreter register interpreter_lang_latest_code SNOMED concept id for latest language interpreter code interpreter_lang_latest_name code term for latest language interpreter code preflang_latest_date latest date of code for preferred language register preflang_latest_code SNOMED concept id for latest preferred language code preflang_latest_name code term for latest preferred language code coms_support_latest_date latest date of communication support code coms_support_latest_code SNOMED concept id for latest communication support code coms_support_latest_name code term for latest communication support code"},{"location":"Data/Prescriptions/","title":"Prescription Tables","text":""},{"location":"Data/Prescriptions/#prescriptions-overview","title":"Prescriptions Overview","text":"<p>The prescription tables contain patients prescribed the specified medications in the previous 6 months. </p>"},{"location":"Data/Prescriptions/#common-fields","title":"Common Fields","text":"<p>Each table has the following fields:</p> fieldname description label descriptive label of the table contents. Be 'diabetes' area_id area id for GP Practice ods_code ODS (Organisation Data Service) identifier for the GP Practice. person_id identifier of person patient_id identifier of patient at a practice"},{"location":"Data/Prescriptions/#information-format","title":"Information format:","text":"<p><code>table name</code> (full name, abbreviation) The business rules syntax used to create the table with (CLUSTER ID)s and date ranges.  Table of fieldnames + description specific to the table Additional information  </p>"},{"location":"Data/Prescriptions/#prescribed_antidepressants","title":"<code>prescribed_antidepressants</code>","text":"<p>Anti-depressant medication (BNF 0403) excluding Amitriptyline hydrochloride (BNF 0403010B0) recorded &gt;=last 6 months, selecting latest Repeat prescription or, where no Repeat prescription is found, latest Acute prescription. With earliest date of prescription course, prescription type and count of prescriptions within the course.</p> fieldname description latest6m_date latest date of code for prescription in the last 12 months latest6m_code SNOMED concept id for latest code in the last 12 months latest6m_name code term for latest code in the last 12 months prescription_type type of prescription (repeat / acute) prescription_count count of prescriptions within the prescription course prescription_earliest_date earliest prescription date for the prescription course bnf_code British National Formulary code for medication <p>See Antidepressants for more detail of the medications included.</p>"},{"location":"Data/Prescriptions/#prescribed_statins","title":"<code>prescribed_statins</code>","text":"<p>Statins meds code (STAT_COD) recorded &gt;=last 6 months, and earliest recorded</p> fieldname description latest6m_date latest date of prescription code in the last 12 months latest6m_code SNOMED concept id for latest code in the last 12 months latest6m_name code term for latest code in the last 12 months earliest_date earliest date of prescription code earliest_code SNOMED concept id for earliest prescription code earliest_name code term for earliest prescription code <p>Backlinks:</p>"},{"location":"Data/Referrals/","title":"Referral Tables","text":""},{"location":"Data/Referrals/#referrals-overview","title":"Referrals Overview","text":"<p>The Referral tables contain contain recent referral information by patient.</p>"},{"location":"Data/Referrals/#common-fields","title":"Common Fields","text":"<p>Each table has the following fields:</p> fieldname description label descriptive label of the table contents. eg 'diabetes' area_id area id for GP Practice ods_code ODS (Organisation Data Service) identifier for the GP Practice. person_id identifier of person patient_id identifier of patient at a practice"},{"location":"Data/Referrals/#information-format","title":"Information format","text":"<p><code>table name</code> (full condition name, abbreviation) The business rules syntax used to create the table with (CLUSTER ID)s and date ranges.  Table of fieldnames + description specific to the table Additional information</p>"},{"location":"Data/Referrals/#referral_social_prescribing","title":"<code>referral_social_prescribing</code>","text":"<p>Social referral prescribed (SOCPRESREF_COD)</p> fieldname description latest_date latest date of code for register latest_code SNOMED concept id for latest code latest_name code term for latest code"},{"location":"Data/Registers/","title":"Register Tables","text":""},{"location":"Data/Registers/#registers-overview","title":"Registers Overview","text":"<p>The register tables contain patients with a specified diagnosis or long term condition. </p>"},{"location":"Data/Registers/#common-fields","title":"Common Fields","text":"<p>Each table has the following fields:</p> fieldname description label descriptive label of the table contents. eg 'diabetes' area_id area id for GP Practice ods_code ODS (Organisation Data Service) identifier for the GP Practice. person_id identifier of person patient_id identifier of patient at a practice"},{"location":"Data/Registers/#information-format","title":"Information format:","text":"<p><code>table name</code> (full condition name, abbreviation) The business rules syntax used to create the table with (CLUSTER ID)s and date ranges.  Table of fieldnames + description specific to the table Additional information  </p>"},{"location":"Data/Registers/#anxiety","title":"<code>anxiety</code>","text":"<p>Anxiety code (ANX_CEG) recorded &gt;= last 24 months.</p> fieldname description latest_date latest date of code for register latest_code SNOMED concept id for latest code latest_name code term for latest code <p>Anxiety covers a range of Common Mental Health disorders, including:</p> <ul> <li>Generalised Anxiety and Panic Attacks   </li> <li>Anxiety associated with specific behaviours or situations   </li> <li>Phobias </li> <li>Obsessive-Compulsive behaviour (OCD)</li> <li>Post-Trauma Stress (PSTD)</li> <li>Occupation-related Stress</li> </ul> <p>For full information on the range of Mental Health registers and prescribing see Analysis: Mental Health</p>"},{"location":"Data/Registers/#asthma","title":"<code>asthma</code>","text":"<p>Asthma code (AST_COD) excluding patients with a more recent resolved code (ASTRES_COD), and include Asthma Treatment meds code (ASTTRT_COD) recorded &gt;= last 12 months. (QOF)</p> fieldname description earliest_date earliest, ie diagnosis, date of code for register earliest_code SNOMED concept id for earliest code earliest_name code term for earliest code"},{"location":"Data/Registers/#atrial_fibrillation-af","title":"<code>atrial_fibrillation</code> (AF)","text":"<p>Atrial Fibrillation code (AFIB_COD) excluding patients with a more recent resolved code (AFIBRES_COD)</p> fieldname description earliest_date earliest, ie diagnosis, date of code for register earliest_code SNOMED concept id for earliest code earliest_name code term for earliest code"},{"location":"Data/Registers/#autism","title":"<code>autism</code>","text":"<p>Autism code (AUTISM_COD) recorded ever</p> fieldname description earliest_date earliest, ie diagnosis, date of code for register earliest_code SNOMED concept id for earliest code earliest_name code term for earliest code"},{"location":"Data/Registers/#cancer","title":"<code>cancer</code>","text":"<p>Cancer code (CAN_COD) recorded &gt;= 2003-04-01</p> fieldname description earliest_date earliest, ie diagnosis, date of code for register earliest_code SNOMED concept id for earliest code earliest_name code term for earliest code"},{"location":"Data/Registers/#chd-chronic-heart-disease","title":"<code>chd</code> (Chronic Heart Disease)","text":"<p>CHD code (CHD_COD) recorded ever</p> fieldname description earliest_date earliest, ie diagnosis, date of code for register earliest_code SNOMED concept id for earliest code earliest_name code term for earliest code"},{"location":"Data/Registers/#ckd-chronic-kidney-disease","title":"<code>ckd</code> (Chronic Kidney Disease)","text":"<p>Aged &gt;= 18 years, and CKD code (CKD_COD) excluding patients with a more recent resolved code (CKDRES_COD) or a more recent CKD 1 or 2 code (CKD1AND2_COD)</p> fieldname description earliest_date earliest, ie diagnosis, date of code for register earliest_code SNOMED concept id for earliest code earliest_name code term for earliest code"},{"location":"Data/Registers/#copd-chronic-obstructive-pulmonary-disease","title":"<code>copd</code> (Chronic Obstructive Pulmonary Disease)","text":"<p>COPD code (COPD_COD) excluding patients with a more recent resolved code (COPDRES_COD), and where patients have a previous resolved code (COPDRES_COD), COPD code (COPD_COD) after the latest resolved code (COPDRES_COD)</p> fieldname description earliest_date earliest, ie diagnosis, date of code for register earliest_code SNOMED concept id for earliest code earliest_name code term for earliest code"},{"location":"Data/Registers/#dementia","title":"<code>dementia</code>","text":"<p>Dementia code (DEM_COD) recorded ever</p> fieldname description earliest_date earliest, ie diagnosis, date of code for register earliest_code SNOMED concept id for earliest code earliest_name code term for earliest code"},{"location":"Data/Registers/#depression","title":"<code>depression</code>","text":"<p>Aged &gt;= 18 years, and Depression code (DEPR_COD) recorded &gt;= 2006-04-01 excluding patients with a more recent resolved code (DEPRES_COD)</p> fieldname description earliest_date earliest, ie diagnosis, date of code for register earliest_code SNOMED concept id for earliest code earliest_name code term for earliest code latest_date latest date of code for register latest_code SNOMED concept id for latest code latest_name code term for latest code <p>For full information on the range of Mental Health registers and prescribing see Analysis: Mental Health</p>"},{"location":"Data/Registers/#diabetes-diabetes-mellitus-dm","title":"<code>diabetes</code> (Diabetes Mellitus, DM)","text":"<p>Aged &gt;= 18 years, and Diabetes code (DM_COD) excluding patients with a more recent resolved code (DMRES_COD). Selecting most recent Diabetes Type code (DMTYPE1_COD, DMTYPE2_COD) to define diabetes type.</p> fieldname description earliest_date earliest, ie diagnosis, date of code for register earliest_code SNOMED concept id for earliest code earliest_name code term for earliest code dm_type diabetes type (TYPE_1 or TYPE_2)"},{"location":"Data/Registers/#eating_disorder","title":"<code>eating_disorder</code>","text":"<p>Eating disorder code (EATINGDIS_CEG) recorded &gt;= last 24 months</p> fieldname description latest_date latest date of code for register latest_code SNOMED concept id for latest code latest_name code term for latest code <p>For full information on the range of Mental Health registers and prescribing see Analysis: Mental Health</p>"},{"location":"Data/Registers/#epilepsy","title":"<code>epilepsy</code>","text":"<p>Epilepsy code (EPIL_COD) excluding patients with a more recent resolved code (EPILRES_COD), and include Epilepsy Drug meds code (EPILDRUG_COD) recorded &gt;= last 6 months</p> fieldname description earliest_date earliest, ie diagnosis, date of code for register earliest_code SNOMED concept id for earliest code earliest_name code term for earliest code"},{"location":"Data/Registers/#f_hypercholesterolemia-familial-hypercholesteremia-fh","title":"<code>f_hypercholesterolemia</code> (Familial Hypercholesteremia, FH)","text":"<p>Familial Hypercholestelemia code (FHYP_COD) recorded ever</p> fieldname description earliest_date earliest, ie diagnosis, date of code for register earliest_code SNOMED concept id for earliest code earliest_name code term for earliest code"},{"location":"Data/Registers/#gestational_diabetes-gdm","title":"<code>gestational_diabetes</code> (GDM)","text":"<p>Gestational diabetes code (GESTDIAB_COD) recorded ever</p> fieldname description earliest_date earliest, ie diagnosis, date of code for register earliest_code SNOMED concept id for earliest code earliest_name code term for earliest code"},{"location":"Data/Registers/#heart_failure-hf","title":"<code>heart_failure</code> (HF)","text":"<p>Heart failure code (HF_COD) excluding patients with a more recent resolved code (HFRES_COD)</p> fieldname description earliest_date earliest, ie diagnosis, date of code for register earliest_code SNOMED concept id for earliest code earliest_name code term for earliest code"},{"location":"Data/Registers/#hepatitis_b-hepatitis-b-hepb-hbv","title":"<code>hepatitis_b</code> (Hepatitis B, HepB, HBV)","text":"<p>Hepatitis B code (HBV_CEG) recorded ever</p> fieldname description earliest_date earliest, ie diagnosis, date of code for register earliest_code SNOMED concept id for earliest code earliest_name code term for earliest code latest_date latest date of code for register latest_code SNOMED concept id for latest code latest_name code term for latest code"},{"location":"Data/Registers/#hepatitis_c-hepatitis-c-hepb-hcv","title":"<code>hepatitis_c</code> (Hepatitis C, HepB, HCV)","text":"<p>Hepatitis C code (HCV_CEG) recorded ever</p> fieldname description earliest_date earliest, ie diagnosis, date of code for register earliest_code SNOMED concept id for earliest code earliest_name code term for earliest code latest_date latest date of code for register latest_code SNOMED concept id for latest code latest_name code term for latest code"},{"location":"Data/Registers/#hiv-human-immunodeficiency-virus","title":"<code>hiv</code> (Human Immunodeficiency Virus)","text":"<p>HIV code (HIV_CEG) recorded ever</p> fieldname description latest_date latest date of code for register latest_code SNOMED concept id for latest code latest_name code term for latest code"},{"location":"Data/Registers/#hypertension-ht","title":"<code>hypertension</code> (HT)","text":"<p>Hypertension (HYP_COD) excluding patients with a more recent resolved code (HYPRES_COD)</p> fieldname description earliest_date earliest, ie diagnosis, date of code for register earliest_code SNOMED concept id for earliest code earliest_name code term for earliest code"},{"location":"Data/Registers/#learning_disabilities-ld","title":"<code>learning_disabilities</code> (LD)","text":"<p>Learning Disabilities code (LD_COD) recorded ever</p> fieldname description earliest_date earliest, ie diagnosis, date of code for register earliest_code SNOMED concept id for earliest code earliest_name code term for earliest code"},{"location":"Data/Registers/#motor_neurone_disease-mnd","title":"<code>motor_neurone_disease</code> (MND)","text":"<p>Motor Neurone Disease code (MND_COD)</p> fieldname description earliest_date earliest, ie diagnosis, date of code for register earliest_code SNOMED concept id for earliest code earliest_name code term for earliest code"},{"location":"Data/Registers/#multiple_sclerosis-ms","title":"<code>multiple_sclerosis</code> (MS)","text":"<p>Multiple Sclerosis code (MS_COD)</p> fieldname description earliest_date earliest, ie diagnosis, date of code for register earliest_code SNOMED concept id for earliest code earliest_name code term for earliest code"},{"location":"Data/Registers/#non_dm_hyperglycaemia-non-diabetic-hyperglycaemia-ndh","title":"<code>non_dm_hyperglycaemia</code> (Non-Diabetic Hyperglycaemia, NDH)","text":"<p>Aged &gt;= 18 years, and Non-Diabetic Hyperglycaemia code (NDH_COD) or IGT code (IGT_COD) or Pre-Diabetes code (PRD_COD) excluding patients with a Diabetes code (DM_COD)</p> fieldname description earliest_date earliest, ie diagnosis, date of code for register earliest_code SNOMED concept id for earliest code earliest_name code term for earliest code"},{"location":"Data/Registers/#obesity","title":"<code>obesity</code>","text":"<p>Aged &gt;= 18 years, and BMI Value code (BMIVAL_COD) &gt;=30 recorded &gt;= last 12 months, or Non-Value BMI Indicating &gt;= 30 code (BMI30_COD) recorded &gt;= last 12 months</p> fieldname description latest12m_date latest date of code for register in the last 12 months latest12m_code SNOMED concept id for latest code in the last 12 months latest12m_name code term for latest code in the last 12 months bmi30plus_latest12m_date latest date of code for register in the last 12 months with BMI &gt;=30 bmi30plus_latest12m_code SNOMED concept id for latest code in the last 12 months with BMI &gt;=30 bmi30plus_latest12m_name code term for latest code in the last 12 months with BMI &gt;=30"},{"location":"Data/Registers/#osteoporosis","title":"<code>osteoporosis</code>","text":"<p>Osteoporosis code (OSTEO_COD)</p> fieldname description earliest_date earliest, ie diagnosis, date of code for register earliest_code SNOMED concept id for earliest code earliest_name code term for earliest code"},{"location":"Data/Registers/#palliative_care","title":"<code>palliative_care</code>","text":"<p>Palliative Care code (PALCARE_COD) excluding patients with a more recent not indicated code (PALCARENI_COD)</p> fieldname description earliest_date earliest, ie diagnosis, date of code for register earliest_code SNOMED concept id for earliest code earliest_name code term for earliest code"},{"location":"Data/Registers/#parkinsons_disease","title":"<code>parkinsons_disease</code>","text":"<p>Parkinson's Disease code (PD_COD)</p> fieldname description earliest_date earliest, ie diagnosis, date of code for register earliest_code SNOMED concept id for earliest code earliest_name code term for earliest code"},{"location":"Data/Registers/#pad-peripheral-arterial-disease","title":"<code>pad</code> (Peripheral Arterial Disease)","text":"<p>PAD code (PAD_COD)</p> fieldname description earliest_date earliest, ie diagnosis, date of code for register earliest_code SNOMED concept id for earliest code earliest_name code term for earliest code"},{"location":"Data/Registers/#personality_disorder","title":"<code>personality_disorder</code>","text":"<p>Personality Disorder code (PERSONALITYDIS_CEG)</p> fieldname description latest_date latest date of code for register latest_code SNOMED concept id for latest code latest_name code term for latest code <p>For full information on the range of Mental Health registers and prescribing see Analysis: Mental Health</p>"},{"location":"Data/Registers/#psoriasis","title":"<code>psoriasis</code>","text":"<p>Psoriasis code (PSORIASIS_COD)</p> fieldname description earliest_date earliest, ie diagnosis, date of code for register earliest_code SNOMED concept id for earliest code earliest_name code term for earliest code"},{"location":"Data/Registers/#rh_arthritis-rheumatoid-arthritis","title":"<code>rh_arthritis</code> (Rheumatoid Arthritis)","text":"<p>Aged &gt;= 16 years, and Rheumatoid Arthritis code (RARTH_COD)</p> fieldname description earliest_date earliest, ie diagnosis, date of code for register earliest_code SNOMED concept id for earliest code earliest_name code term for earliest code"},{"location":"Data/Registers/#severe_mental_illness-smi","title":"<code>severe_mental_illness</code> (SMI)","text":"<p>Mental Health code (MH_COD) excluding patients with a more recent remission code (MHREM_COD), and include Lithium meds code (LIT_COD) recorded &gt;= last 6 months excluding patients with a more recent Lithium Stopped code (LITSTP_COD)</p> fieldname description earliest_date earliest, ie diagnosis, date of code for register earliest_code SNOMED concept id for earliest code earliest_name code term for earliest code lithium_latest_date latest, ie prescription, date of code for medication recorded &gt;= last 6 months lithium_latest_code SNOMED concept id for latest code for medication recorded &gt;= last 6 months lithium_latest_name code term for latest code for medication recorded &gt;= last 6 months <p>Note: Severe Mental Illness (SMI) includes both schizophrenia and bipolar disorder and anyone on lithium who is not also coded having these conditions. For full information on the range of Mental Health registers and prescribing see Analysis: Mental Health</p>"},{"location":"Data/Registers/#sti-sexually-transmitted-infection-std","title":"<code>sti</code> (Sexually Transmitted Infection, STD)","text":"<p>Sexually Transmitted Infection code (STI_CEG)</p> fieldname description latest_date latest date of code for register latest_code SNOMED concept id for latest code latest_name code term for latest code"},{"location":"Data/Registers/#sickle_cell-scd","title":"<code>sickle_cell</code> (SCD)","text":"<p>Sickle Cell code (SICKLE_COD)</p> fieldname description earliest_date earliest, ie diagnosis, date of code for register earliest_code SNOMED concept id for earliest code earliest_name code term for earliest code"},{"location":"Data/Registers/#stroke_tia-stroke-transient-ischaemia-attack","title":"<code>stroke_tia</code> (Stroke / Transient Ischaemia Attack)","text":"<p>Stroke code (STRK_COD) or TIA code (TIA_COD)</p> fieldname description earliest_date earliest, ie diagnosis, date of code for register earliest_code SNOMED concept id for earliest code earliest_name code term for earliest code <p>Backlinks:</p>"},{"location":"Data/Screening_%26_Checks/","title":"Screening &amp; Check Tables","text":""},{"location":"Data/Screening_%26_Checks/#screening-checks-overview","title":"Screening &amp; Checks Overview","text":"<p>The Screening &amp; Check tables contain health screening results by patient.. </p>"},{"location":"Data/Screening_%26_Checks/#common-fields","title":"Common Fields","text":"<p>Each table has the following fields:</p> fieldname description label descriptive label of the table contents. eg 'diabetes' area_id area id for GP Practice ods_code ODS (Organisation Data Service) identifier for the GP Practice. person_id identifier of person patient_id identifier of patient at a practice"},{"location":"Data/Screening_%26_Checks/#information-format","title":"Information format:","text":"<p><code>table name</code> (full condition name, abbreviation) The business rules syntax used to create the table with (CLUSTER ID)s and date ranges.  Table of fieldnames + description specific to the table Additional information  </p>"},{"location":"Data/Screening_%26_Checks/#screen_bowel_cancer","title":"<code>screen_bowel_cancer</code>","text":"<p>Bowel Cancer Screening evidenced results (COLCANSCREV_COD). </p> fieldname description latest_date latest date of code for register latest_code SNOMED concept id for latest code latest_name code term for latest code age_at_event age of patient when screening took place <p>For full information on cancer screening age ranges see Analysis: Cancer Screening</p>"},{"location":"Data/Screening_%26_Checks/#screen_bowel_cancer_declined","title":"<code>screen_bowel_cancer_declined</code>","text":"<p>Bowel Cancer Screening Declined code (COLCANSCRDEC_COD). </p> fieldname description latest_date latest date of code for register latest_code SNOMED concept id for latest code latest_name code term for latest code <p>For full information on cervical cancer screening exclusions see Analysis: Cancer Screening</p>"},{"location":"Data/Screening_%26_Checks/#screen_breast_cancer","title":"<code>screen_breast_cancer</code>","text":"<p>Female, and Breast Cancer Screening code (BRCANSCR_COD). </p> fieldname description latest_date latest date of code for register latest_code SNOMED concept id for latest code latest_name code term for latest code age_at_event age of patient when screening took place <p>For full information on cancer screening age ranges see Analysis: Cancer Screening</p>"},{"location":"Data/Screening_%26_Checks/#screen_breast_cancer_declined","title":"<code>screen_breast_cancer_declined</code>","text":"<p>Female, and Breast Cancer Screening Declined code (BRCANSCRDEC_COD). </p> fieldname description latest_date latest date of code for register latest_code SNOMED concept id for latest code latest_name code term for latest code"},{"location":"Data/Screening_%26_Checks/#screen_cervical_cancer","title":"<code>screen_cervical_cancer</code>","text":"<p>Female, and Cervical Cancer Screening code (SMEAR_COD). With exclusion as No Cervix code (NOCX_COD). </p> fieldname description latest_date latest date of code for register latest_code SNOMED concept id for latest code latest_name code term for latest code age_at_event age of patient when screening took place exclusion_earliest_date latest date of code for exclusion exclusion_earliest_code SNOMED concept id for latest exclusion code exclusion_earliest_name code term for latest exclusion code <p>For full information on cervical cancer screening age ranges and exclusions see Analysis: Cancer Screening</p>"},{"location":"Data/Screening_%26_Checks/#screen_cervical_cancer_declined","title":"<code>screen_cervical_cancer_declined</code>","text":"<p>Female, and Cervical Cancer Screening Declined code (CSDEC_COD). </p> fieldname description latest_date latest date of code for register latest_code SNOMED concept id for latest code latest_name code term for latest code"},{"location":"Data/Screening_%26_Checks/#screen_diabetic_retinal","title":"<code>screen_diabetic_retinal</code>","text":"<p>Diabetic Retinal Screening code (RET_COD). </p> fieldname description latest_date latest date of code for register latest_code SNOMED concept id for latest code latest_name code term for latest code"},{"location":"Data/Screening_%26_Checks/#screen_pulse_check","title":"<code>screen_pulse_check</code>","text":"<p>Pulse Check code (PULRHYTH_COD). </p> fieldname description latest_date latest date of code for register latest_code SNOMED concept id for latest code latest_name code term for latest code pulse_type standardised descriptor of pulse type associated with latest_name (regular, irregular, irregularly irregular, unknown) <p>Note Pulse Checks are done opportunistically, which means there is no declined coding as with other screening services.</p> <p>Backlinks:</p>"},{"location":"Data/Sexual_Health/","title":"Sexual Health Tables","text":""},{"location":"Data/Sexual_Health/#sexual-health-overview","title":"Sexual Health Overview","text":"<p>The Sexual Health tables contain recent information on sexual health and contraception by patient.</p>"},{"location":"Data/Sexual_Health/#common-fields","title":"Common Fields","text":"<p>Each table has the following fields:</p> fieldname description label descriptive label of the table contents. eg 'diabetes' area_id area id for GP Practice ods_code ODS (Organisation Data Service) identifier for the GP Practice. person_id identifier of person patient_id identifier of patient at a practice"},{"location":"Data/Sexual_Health/#information-format","title":"Information format:","text":"<p><code>table name</code> (relationship) Measure (full title and synoymns) The business rules syntax used to create the table with (CLUSTER ID)s and date ranges.  Table of fieldnames + description specific to the table Additional information  </p>"},{"location":"Data/Sexual_Health/#larc-long-acting-reversible-contraception","title":"<code>larc</code> (Long-Acting Reversible Contraception)","text":"<p>Long-Acting Reversible Contraception (LARC): includes IUCD and Implant procedures. Codes: IUCDFIT_CEG, IUCDREM_CEG, IMPFIT_CEG, IMPREM_CEG.</p> fieldname description iucdfit_latest_date latest date of IUCD fitting code iucdfit_latest_code SNOMED concept id for latest IUCD fit iucdfit_latest_name code term for latest IUCD fit code iucdremoved_latest_date latest date of IUCD removed code iucdremoved_latest_code SNOMED concept id for latest IUCD removed iucdremoved_latest_name code term for latest IUCD removed code implantfit_latest_date latest date of Implant fitting code implantfit_latest_code SNOMED concept id for latest Implant fit implantfit_latest_name code term for latest Implant fit code implantremoved_latest_date latest date of Implant removed code implantremoved_latest_code SNOMED concept id for latest Implant removed implantremoved_latest_name code term for latest Implant removed code"},{"location":"Data/Substances/","title":"Substance (Tobacco, Alcohol, Drugs) Tables","text":""},{"location":"Data/Substances/#substances-overview","title":"Substances Overview","text":"<p>The Substances tables contain recent information on smoking, alcohol and substance misuse by patient.</p>"},{"location":"Data/Substances/#common-fields","title":"Common Fields","text":"<p>Each table has the following fields:</p> fieldname description label descriptive label of the table contents. eg 'diabetes' area_id area id for GP Practice ods_code ODS (Organisation Data Service) identifier for the GP Practice. person_id identifier of person patient_id identifier of patient at a practice"},{"location":"Data/Substances/#information-format","title":"Information format:","text":"<p><code>table name</code> (full condition name, abbreviation) The business rules syntax used to create the table with (CLUSTER ID)s and date ranges.  Table of fieldnames + description specific to the table Additional information  </p>"},{"location":"Data/Substances/#smoking","title":"<code>smoking</code>","text":"<p>Smoking codes (SMOK_COD and NDASMOK_COD).</p> fieldname description latest_date latest code date latest_code latest code latest_name latest code name smoking_status provides smoking status according to latest code (from either SMOK_COD or NDASMOK_COD) qof_latest_date latest QOF code date qof_latest_code latest QOF code qof_latest_name latest QOF code name qof_smoking_status latest smoking status according to latest QOF code (SMOK_COD) <p>Note: QOF-only columns contain codes from SMOK_COD only and may include NULLs. Use <code>smoking_status</code> for all current smoking codes. Use <code>qof_smoking_status</code> only when interested in QOF definitions.</p>"},{"location":"Data/Substances/#alcohol","title":"<code>alcohol</code>","text":"<p>Alcohol consumption and intervention-related codes:  (ALC_COD, AUDIT_COD, AUDITC_COD, FAST_COD, ALCADV_COD, ALCBRINT_COD, ALCEXINT_COD, ALCREF_COD, ALCINTDEC_COD).</p> fieldname description latest_date latest date of any alcohol consumption code, including codes without a value latest_code SNOMED concept id for latest code latest_name code term for latest code consume_latest_date latest date of alcohol consumption code with a value consume_latest_code SNOMED concept id for latest alcohol consumption code consume_latest_name code term for latest alcohol consumption code consume_latest_value latest alcohol consumption value recorded consume_latest_units unit of measure and time period for consume_latest_value consume_latest_units_pw standardised alcohol consumption (units per week) audit_latest_date latest alcohol audit code date audit_latest_code SNOMED concept id for latest alcohol audit code audit_latest_name code term for latest alcohol audit code audit_latest_value latest alcohol audit value recorded auditc_latest_date latest Alcohol Audit-C code date auditc_latest_code SNOMED concept id for latest Alcohol Audit-C code auditc_latest_name code term for latest Alcohol Audit-C code auditc_latest_value latest Alcohol Audit-C value recorded fast_latest_date latest Alcohol FAST code date fast_latest_code SNOMED concept id for latest Alcohol FAST code fast_latest_name code term for latest Alcohol FAST code fast_latest_value latest Alcohol FAST value recorded advice_latest_date latest Alcohol Advice code date advice_latest_code SNOMED concept id for latest Alcohol Advice code advice_latest_name code term for latest Alcohol Advice code briefint_latest_date latest Alcohol Brief Intervention code date briefint_latest_code SNOMED concept id for latest Alcohol Brief Intervention code briefint_latest_name code term for latest Alcohol Brief Intervention code extendedint_latest_date latest Alcohol Extended Intervention code date extendedint_latest_code SNOMED concept id for latest Alcohol Extended Intervention code extendedint_latest_name code term for latest Alcohol Extended Intervention code referral_latest_date latest Alcohol Referral code date referral_latest_code SNOMED concept id for latest Alcohol Referral code referral_latest_name code term for latest Alcohol Referral code declinedint_latest_date latest Alcohol Intervention Declined code date declinedint_latest_code SNOMED concept id for latest Alcohol Intervention Declined code declinedint_latest_name code term for latest Alcohol Intervention Declined code <p>See Alcohol Units Per Week</p>"},{"location":"Data/Substances/#substance_misuse","title":"<code>substance_misuse</code>","text":"<p>Illicit Substance Abuse code (ILLSUB_COD), excluding patients with a more recent Non-Substance Misuser code (NONILLSUB_CEG). Includes Illegal Substance Use Intervention code (ILLSUBINT_COD).</p> fieldname description latest_date latest date of code for register latest_code SNOMED concept id for latest code latest_name code term for latest code int_latest_date latest date of intervention code int_latest_code SNOMED concept id for latest intervention code int_latest_name code term for latest intervention code <p>Note: The PCD codeset ILLSUB_COD (Illicit Substance Abuse) includes codes for non-substance misuse.  Patients have been excluded where their latest code is in the CEG defined NONILLSUM_CEG (Non-Illicit Substance Misuse) codeset.</p>"},{"location":"Data/Vaccinations/","title":"Vaccination Tables","text":""},{"location":"Data/Vaccinations/#vaccinations-overview","title":"Vaccinations Overview","text":"<p>The vaccination tables contain patients vaccinated with the specified medications.</p>"},{"location":"Data/Vaccinations/#common-fields","title":"Common Fields","text":"<p>Each table has the following fields:</p> fieldname description label descriptive label of the table contents. Be 'diabetes' area_id area id for GP Practice ods_code ODS (Organisation Data Service) identifier for the GP Practice. person_id identifier of person patient_id identifier of patient at a practice"},{"location":"Data/Vaccinations/#information-format","title":"Information format:","text":"<p><code>table name</code> (full name, abbreviation) The business rules syntax used to create the table with (CLUSTER ID)s and date ranges.  Table of fieldnames + description specific to the table Additional information  </p>"},{"location":"Data/Vaccinations/#vaccination_covid","title":"<code>vaccination_covid</code>","text":"<p>Covid Vaccination code (C19VACC_CEG) or Covid Vaccination meds code (C19VACCMEDS_CEG)</p> fieldname description latest_date latest date of code for immunisation latest_code SNOMED concept id for latest code latest_name code term for latest code code_type source of code (a = admin record, m = medication) vacc_num estimated count of covid vaccinations received"},{"location":"Database/Changes2024/","title":"Changes from ELDB 2024","text":""},{"location":"Database/Changes2024/#data","title":"Data","text":"<p>All data has been rerun from 01/04/2025.</p>"},{"location":"Database/Changes2024/#core","title":"Core","text":"<p>Updated to include the new ethnicity and IMD fields (see below) LSOA has calculated from patient's postcode to ensure a precise definition for <code>lsoa2021</code></p> <ul> <li>Removed column <code>ceg_16</code> </li> <li>Removed column <code>nhs_5</code> </li> <li>Added column <code>ethnic_5</code> - ethnicity 5+1 (2011) categorisation  </li> <li>Added column <code>ethnic_16</code> - ethnicity 16+1 categorisation  </li> <li>Added column <code>ethnic_18</code> - ethnicity 18+1 categorisation  </li> <li>Added column <code>ethnic_19</code> - ethnicity 19+1 categorisation</li> <li>Added column <code>pt_lad2023</code> - LAD ONS code (2023) based on patient's identified current address    </li> <li>Added column <code>imd2019</code> - Indices of Multiple Deprivation score calculated by ONS in 2019 (England only)</li> <li>Added column <code>imd2019_rank</code> - IMD rank by country calculated by ONS</li> <li>Added column <code>lsoa2021</code> - ONS (e-code) for LSOA 2021</li> </ul>"},{"location":"Database/Changes2024/#database-info","title":"Database Info","text":"<ul> <li>Added table  <code>db_clusters</code> - NHS and CEG code clusters used to build tables  </li> <li>Added table <code>db_codeset_ceg</code> - CEG code clusters used in ELDB  </li> </ul>"},{"location":"Database/Changes2024/#ethnicity","title":"Ethnicity","text":"<p>Updated ethnicity tables to improve consistency and quality of groupings and incorporate the 2021 census categorisations.</p> <ul> <li>Removed table <code>lu_ethnicity</code> </li> <li>Removed table <code>lu_ethnicity_key</code> </li> <li>Removed table <code>lu_ethnicity_sde</code> </li> <li>Added table <code>lu_ethnicity2</code> </li> <li>Added table <code>lu_ethnicity2_map</code> </li> </ul>"},{"location":"Database/Changes2024/#lsoa-and-imd","title":"LSOA and IMD","text":"<p>Updated LSOA and IMD tables to provide better incorporation of LSOA 2021 and greater information on LSOAs outside NEL.</p> <ul> <li>Removed table <code>lu_lsoa</code> </li> <li>Removed table <code>lu_deprivation</code> </li> <li>Added table <code>lu_imd2019</code> - IMD ranking and quintiles</li> <li>Added table <code>lu_localauthority</code> - Local Authorities for UK</li> <li>Added table <code>lu_ons</code> - ONS codes for UK geographies (Local Authorities, ICBs, Regions etc)</li> <li>Improved quintile calculation in <code>lu_imd2019</code> distributing uneven counts to first quintiles rather than last.</li> <li>ONS datasets have two changes in north east London LSOAs:<ul> <li>LSOA E01003482 has been reclassified from LB Newham (2019) to LB Barking and Dagenham (2023)</li> <li>LSOA E01004252 has been reclassified from LB Tower Hamlets (2019) to LB Newham (2023)</li> </ul> </li> </ul>"},{"location":"Database/Known_Issues/","title":"Known Issues","text":""},{"location":"Database/Known_Issues/#eldb2025-data-issues","title":"ELDB2025 Data Issues","text":""},{"location":"Database/Known_Issues/#missing-practices","title":"Missing Practices","text":"<p>The data for three practices was not initially available in the Compass data for the ELDB build, due to an issue with the data streamed from Optum (EMIS). </p> <ul> <li>Forest Surgery (F86026)</li> <li>Waltham Forest Community &amp; Family Health Services Ltd (F86644)</li> <li>Beam Park Medical Practice (Y08371)</li> </ul> <p>The data has now filed into Compass and a separate data extract has been run for these three practices.  ELDB2025 was regenerated in July 2025 using the now complete ELDB2025 data extract (eldb2025.2.0).</p>"},{"location":"Database/Known_Issues/#general-data-issues","title":"General Data Issues","text":""},{"location":"Database/Known_Issues/#patient-registration","title":"Patient Registration","text":"<p>A patient\u2019s current practice registration and date, as shown in the CORE table, is calculated using the available registration data in Compass.  The EMIS API to DDS does not contain the full detailed registration process history which EMIS uses to refine its GP Practice Currently Registered list, particularly in relation to patients moving to or from a practice.  The practice lists in ELDB can therefore include patients that EMIS would define as having moved to another practice.  Listsizes with EMIS may differ by \u00b12%.</p>"},{"location":"Database/Known_Issues/#code-episode","title":"Code Episode","text":"<p>EMIS uses the Episode field for an entered clinical code in its QOF syntax to identify patients and diagnosis dates for Depression and Epilepsy. This field indicates whether an entered code relates to a new or first episode of the condition, or an ongoing review.  The EMIS API however does not pass this field to DDS.  Without this field, the registers derived from Compass can only find the initial diagnosis date of the condition.  Furthermore, it means patients with a resolved code followed by a code with a Review or End Episode flag are excluded from EMIS reports but included in Compass based reports.</p>"},{"location":"Database/Overview/","title":"Data Overview","text":""},{"location":"Database/Overview/#database-overview","title":"Database Overview","text":"<p>The East London Database is a series of annual databases containing data from the 1st April for patients registered with GP practices within north east London on that date. The coverage has expanded over the years to now include all practices in the North East London ICB area (City &amp; Hackney, Newham, Tower Hamlets, Waltham Forest, Redbridge, Barking &amp; Dagenham, and Havering).</p> <ul> <li>eldb2014 \u2013 eldb2019: contain data obtained from EMIS for inner east London. Hosted in MS Access and not currently available to external analysts.</li> <li>eldb2020: contains data from EMIS for inner east London. It is hosted and available to external analysts on our ELDB SQL Server.</li> <li>eldb2021 \u2013 onwards: contains data from our copy of the Discovery Data Service for all North East London. It is hosted and available to external analysts on our ELDB SQL Server.</li> </ul> <p>Each year contains tables providing the earliest and/or latest codes for the standard QOF registers and clinical measures (Blood Pressure, HbA1c etc) as well as additional register, activity, and status tables. We have made changes and improvements to the schema and included tables for the database each year.</p>"},{"location":"Database/Overview/#data-flow","title":"Data Flow","text":"<p>ELDB contains data derived from the Discovery Data Service (DDS), via the CEG Compass database, for all practices within the North East London ICB area (City &amp; Hackney, Newham, Tower Hamlets, Waltham Forest, Redbridge, Barking &amp; Dagenham, and Havering).  Voror, the company managing DDS, receive data on a daily basis from Optum (EMIS) and TTP (SystmOne), the two clinical system providers in the area, which they process into the DDS.  CEG maintain an API to file and update a copy of this data each night into our Compass database.  From eldb2021 onwards, the annual ELDB database has been created from Compass, using purpose built SQL scripts, as a one-off snapshot of the data at 1st April each year.</p> <p>The ELDB data is not an exact copy, therefore, of the patient records held on the GP clinical systems.  Not all data fields are passed to Voror and the data undergoes a series of transformations on its path to the ELDB database.  The clinical systems are also designed for managing the healthcare of currently registered patients and so the data they contain is constantly being updated and is not always in sync with DDS and Compass.  Compass has been validated as providing results close to those pulled from clinical systems and further validation checks are carried out when building each annual database.  Reports derived from ELDB should not be compared, however, with reports derived directly from EMIS Web and SystmOne clinical systems.</p> <p>Prior to eldb2024, additions and updates to the data were drawn from Compass. Because of the changing nature of the clinical system data, this process could introduce some anomalies of patient inclusion, age-at-event and code changes.  From eldb2024 onwards, we have instead taken a snapshot of the full Compass data for the 1st April and used this to build the registers and other tables.  This means that the data is consistent throughout the database. </p> <p>Backlinks:</p>"},{"location":"Database/Version/","title":"Version Log","text":"Version Version-Date Changes 2025.0.0 2025-05-09 Partial build for testing and JSNA development 2025.1.0 2025-06-05 Full table build excluding 3 practices:- Forest Surgery (F86026)- WF Community &amp; Family Health Services Ltd (F86644)- Beam Park Medical Practice (Y08371) 2025.1.1 2025-06-06 Fixed no patients in <code>CORE_BK_pt</code> and <code>CORE_CH_pt</code> <code>lu_ons</code> - Amended <code>short_id</code> for Barking and Dagenham from 'BD' to 'BK' <code>lu_imd2019</code> - Amended <code>area_id</code> to <code>lad_id</code> and <code>area2_id</code> to <code>area_id</code> for consistency and improved usability 2025.1.2 2025-06-16 Deleted <code>nolonger_homeless_temp</code> table - left by build in error Fixed no data in <code>lu_ethnicity2_map</code> table Fixed bug in <code>db_tables</code> that meant it reported <code>db_tables</code> contained 0 rows Refreshed <code>db_tables</code> to provide counts for<code>CORE_BK_pt</code> and <code>CORE_CH_pt</code> 2025-06-17 Access provided to ELDB users and CEG staff 2025.1.3 2025-06-20 Updated <code>db_version</code> for improved version control <code>lu_imd2019</code> - Amended <code>lad_id</code> for Barking and Dagenham from 'BD' to 'BK' <code>lu_imd2019</code> - Amended <code>area_id</code> to <code>area2_id</code>, as it contains combined boroughs and added <code>area_id</code> relating to the same geographies used in other tables. 2025.2.0 2025-07-17 Regenerated database to incorporate 3 practices that could not be included in initial build:- Forest Surgery (F86026)- Waltham Forest Community &amp; Family Health Services Ltd (F86644)- Beam Park Medical Practice (Y08371) Added Beam Park Medical Practice (Y08371) to <code>lu_practice</code> Rebuilt <code>depression</code> with correct date range (01/04/2006 onwards) - previously built as 01/04/2007 onwards. Rebuilt <code>cancer</code> with correct date range (01/04/2003 onwards) - previously built as 01/04/2004 onwards. Added <code>db_counts</code> - previously missing Replaced <code>db_codeset_ceg</code> with <code>db_codesets</code> that includes all codesets (CEG and PCD) used in ELDB2025"},{"location":"Other/Contact/","title":"Contact","text":""},{"location":"Other/Contact/#contacting-ceg","title":"Contacting CEG","text":"<p>Send queries to m.a.sharp@qmul.ac.uk, who will assess and pass them on as required. We will respond within 48 hours.</p>"},{"location":"Other/Updates/","title":"Website Updates","text":""},{"location":"Other/Updates/#updates","title":"Updates","text":"Date Version Information 09/06/2025 1 Website Created 20/06/2025 2 Updates for LSOA and IMD 26/06/2025 3 Improved Home page"},{"location":"Other/Website/","title":"This Website","text":""},{"location":"Other/Website/#static-website","title":"Static Website","text":"<p>This website is built using MkDocs, a Python based Static Site Generator, with additional packages from:</p> <ul> <li>Material for MkDocs</li> <li>Awesome Nav for MkDocs</li> <li>Publisher for MkDocs</li> </ul> <p>It is deployed to Github Pages for publication on the web.</p> <p>For more information on Markdown, the scripting language used to create the website pages, check out the guidance at CommonMark and YakWorks.</p>"}]}